<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux中常用指令 | badboy</title><meta name="author" content="joy"><meta name="copyright" content="joy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="在执行指令时一定要清楚自己在干什么事。Linux中常用指令12#其他的可以去这里查看https:&#x2F;&#x2F;www.linuxcool.com&#x2F;     指令 功能    Ctrl+AIt+T 打开终端   Ctrl+Shift+T 多开终端，打开新的终端   AIt+num 终端切换   ls 列出文件信息   ls -l 以长格式列出文件和目录的详细信息，包括权限、所有者、文件大小和修改日期   ls">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux中常用指令">
<meta property="og:url" content="http://example.com/2024/09/17/Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/index.html">
<meta property="og:site_name" content="badboy">
<meta property="og:description" content="在执行指令时一定要清楚自己在干什么事。Linux中常用指令12#其他的可以去这里查看https:&#x2F;&#x2F;www.linuxcool.com&#x2F;     指令 功能    Ctrl+AIt+T 打开终端   Ctrl+Shift+T 多开终端，打开新的终端   AIt+num 终端切换   ls 列出文件信息   ls -l 以长格式列出文件和目录的详细信息，包括权限、所有者、文件大小和修改日期   ls">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-09-17T09:12:01.534Z">
<meta property="article:modified_time" content="2024-09-27T06:17:42.017Z">
<meta property="article:author" content="joy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/09/17/Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux中常用指令',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-27 14:17:42'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="badboy"><span class="site-name">badboy</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux中常用指令</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-09-17T09:12:01.534Z" title="Created 2024-09-17 17:12:01">2024-09-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-09-27T06:17:42.017Z" title="Updated 2024-09-27 14:17:42">2024-09-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux中常用指令"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="在执行指令时一定要清楚自己在干什么事。"><a href="#在执行指令时一定要清楚自己在干什么事。" class="headerlink" title="在执行指令时一定要清楚自己在干什么事。"></a><strong>在执行指令时一定要清楚自己在干什么事。</strong></h2><h1 id="Linux中常用指令"><a href="#Linux中常用指令" class="headerlink" title="Linux中常用指令"></a>Linux中常用指令</h1><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#其他的可以去这里查看</span><br><span class="line">https://www.linuxcool.com/</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Ctrl+AIt+T</td>
<td align="center">打开终端</td>
</tr>
<tr>
<td align="center">Ctrl+Shift+T</td>
<td align="center">多开终端，打开新的终端</td>
</tr>
<tr>
<td align="center">AIt+num</td>
<td align="center">终端切换</td>
</tr>
<tr>
<td align="center">ls</td>
<td align="center">列出文件信息</td>
</tr>
<tr>
<td align="center">ls -l</td>
<td align="center">以长格式列出文件和目录的详细信息，包括权限、所有者、文件大小和修改日期</td>
</tr>
<tr>
<td align="center">ls -a</td>
<td align="center">显示所有文件，包括以点（<code>.</code>）开头的隐藏文件</td>
</tr>
<tr>
<td align="center">mkdir</td>
<td align="center">创建一个新目录</td>
</tr>
<tr>
<td align="center">cd</td>
<td align="center">更改当前工作目录,进入指定路径</td>
</tr>
<tr>
<td align="center">gedit</td>
<td align="center">GNOME 桌面环境下的文本编辑器，用于打开和编辑文本文件</td>
</tr>
<tr>
<td align="center">cp</td>
<td align="center">复制文件或目录</td>
</tr>
<tr>
<td align="center">rm</td>
<td align="center">删除文件或目录 例如，<code>rm file.txt</code> 会删除 <code>file.txt</code> 文件。使用 <code>-r</code> 选项可以递归删除目录。</td>
</tr>
<tr>
<td align="center">find</td>
<td align="center">在目录中查找文件 例如，<code>find /path -name &quot;*.txt&quot;</code> 会在指定路径下查找所有以 <code>.txt</code> 结尾的文件</td>
</tr>
<tr>
<td align="center">grep</td>
<td align="center">在文件中搜索特定模式  例如，<code>grep &quot;text&quot; file.txt</code> 会在 <code>file.txt</code> 中查找包含 “text” 的行</td>
</tr>
<tr>
<td align="center">chmod</td>
<td align="center">更改文件或目录的权限  例如，<code>chmod 755 file.txt</code> 会将 <code>file.txt</code> 的权限更改为可读、可写和可执行</td>
</tr>
<tr>
<td align="center">adb shell</td>
<td align="center">进入 Android 设备的命令行界面，允许用户执行命令</td>
</tr>
<tr>
<td align="center">adb push</td>
<td align="center">将文件从计算机推送到 Android 设备。例如，<code>adb push local_file.txt /sdcard/</code> 会将本地文件推送到设备的 SD 卡。</td>
</tr>
<tr>
<td align="center">adb pull</td>
<td align="center">从 Android 设备拉取文件到计算机。例如，<code>adb pull /sdcard/file.txt local_file.txt</code> 会将设备上的文件拉取到本地。</td>
</tr>
<tr>
<td align="center">code</td>
<td align="center">启动 Visual Studio Code 编辑器，通常用于打开文件或目录。例如，<code>code .</code> 会在当前目录中打开 Visual Studio Code。</td>
</tr>
</tbody></table>
<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h3 id="Linux入门"><a href="#Linux入门" class="headerlink" title="Linux入门"></a>Linux入门</h3><p>概述</p>
<p>1.linux是一个开源、免费的操作系统，其稳定性、安全性、处理多并发已经得到业界的认可，目前很多企业级的项目（c&#x2F;c++&#x2F;php&#x2F;python&#x2F;java&#x2F;go）都会部署到linux系统上。</p>
<p>2.常见的操作系统（Windows、iOS、Android、macOS、linux&#x2F;unix</p>
<p>3.Linux之父<br>Linus Torvalds<br>Git创作者<br>世界著名黑客<br>小伙伴看看linux0.01版源码（不到1w行）<br>后面老韩给大家演示如何下载<br>最新版本inux内核源码</p>
<p>4.Linux主要的发行版：<br>Ubuntu(乌班图、RedHat(红帽、CentOS、Debain[蝶变]、Fedora、.SuSE、OpenSUSE[示意图]</p>
<p>5.linux的应用领域</p>
<p>linux在<strong>服务器</strong>领域的应用是最强的。</p>
<p>liux运行稳定、对网络的良好支持性、低成本，且可以根据需要进行软件裁剪，内核最小可以达到几百KB等特点，使其近些年来在嵌入式领域的应用得到非常大的提高</p>
<p>主要应用：机顶盒、数字电视、网络电话、程控交换机、手机、PDA、智能家居、智能硬件等都是其应用领域。以后在<strong>物联网</strong>中应用会更加广泛。</p>
<h3 id="vm和Linux的安装"><a href="#vm和Linux的安装" class="headerlink" title="vm和Linux的安装"></a>vm和Linux的安装</h3><p>1.自己csdn，就是文件，克隆 迁移 删除</p>
<p>2.安装vmtools</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.vmtools安装后，可以让我们在windows下更好的管理vm虚拟机</span><br><span class="line">2.可以设置windows和centos的共享文件夹</span><br></pre></td></tr></table></figure>

<p>3.安装vmtools的步骤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.进入centos</span><br><span class="line">2.点击vm菜单的-&gt;install vmware tools</span><br><span class="line">3.centos会出现一个vm的安装包，X.tar.gz</span><br><span class="line">4.拷贝到/opt使用解压命令tar,得到一个安装文件</span><br><span class="line">6.进入该vm解压的目录，/opt目录下</span><br><span class="line">7.安装./vmware-install.pl</span><br><span class="line">全部使用默认设置即可，就可以安装成功</span><br><span class="line">9.注意：安装vmtools需要有gcc.</span><br></pre></td></tr></table></figure>

<p>4.共享文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">基本介绍</span><br><span class="line">1.为了方便，可以设置一个共享文件夹，比如d:/nyshare</span><br><span class="line">●具体步骤</span><br><span class="line">1.菜单-&gt;vm-&gt;setting,如图设置即可注意设置选项为always <span class="built_in">enable</span>,</span><br><span class="line">这样可以读写了</span><br><span class="line">2.windowsi和centos可共享d:/nyshare目录可以读写文件了</span><br><span class="line">3.共享文件夹在centos的/mnt/hgfs/下</span><br><span class="line">●注意事项和细节说明</span><br><span class="line">1.windows和contos就可以共享文件了，但是在实际开发中，文件的</span><br><span class="line">上传下载是需要使用远程方式完成的</span><br><span class="line">2.远程方式登录，我们后面会具体讲解</span><br></pre></td></tr></table></figure>

<h3 id="Linux目录结构"><a href="#Linux目录结构" class="headerlink" title="Linux目录结构"></a>Linux目录结构</h3><p>基本介绍<br>1.linux的文件系统是采用级层式的树状目录结构，在此结构中的最上层是根目录“&#x2F;”，然后在此目录下再创建其他的目录。<br>2深刻理解linux树状文件目录是非常重要的，这里我给大家说明一下。<br>3.记住一句经典的话：<strong>在Linux世界里,一切皆文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">具体的目录结构（不用背知道即可）</span><br><span class="line">/bin[常用](Wusr/bin、/usr/local/bin)</span><br><span class="line">是Binaryl的缩写，这个目录存放着最经常使用的命令</span><br><span class="line">/sbin(/usr/sbin /usr/local/sbin)</span><br><span class="line">S就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。</span><br><span class="line">/home[常用]</span><br><span class="line">存放普通用户的主目录，在Lux中每个用户都有一个自己的目录，一般该目录名是以用户的账</span><br><span class="line">号命名</span><br><span class="line">/root[常用]</span><br><span class="line">该目录为系统管理员，也称作超级权限者的用户主目录</span><br><span class="line">/lib系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所</span><br><span class="line">有的应用程序都需要用到这些共享库</span><br><span class="line">/lost+foud这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件</span><br><span class="line">/etc[常用]</span><br><span class="line">所有的系统管理所需要的配置文件和子目录，比如安装mysql数据库my.conf</span><br><span class="line">/usr</span><br><span class="line">[常用]</span><br><span class="line">这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下</span><br><span class="line">的program files目录。</span><br><span class="line">/boot[常用]存放的是启动Liux时使用的一些核心文件，包括一些连接文件以及镜像文件</span><br><span class="line">/Proc[不能动]这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息</span><br><span class="line">/srv[不能动] service缩写，该目录存放一些服务启动之后需要提取的数据</span><br><span class="line">/sys[不能动]这是liux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统</span><br><span class="line">sysfs</span><br><span class="line">/tmp这个目录是用来存放一些临时文件的</span><br><span class="line">/dev</span><br><span class="line">类似于windows的设备管理器，把所有的硬件用文件的形式存储</span><br><span class="line">/media[常用]linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识</span><br><span class="line">别的设备挂载到这个目录下</span><br><span class="line">/mnt[常用]</span><br><span class="line">系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mt/上，</span><br><span class="line">然后进入该目录就可以查看里的内容了。d:/myshare</span><br><span class="line">/opt这是给主机额外安装软件所摆放的目录。如安装ORACLE数据库就可放到该目录下。默认</span><br><span class="line">为空</span><br><span class="line">/usr/local[常用]</span><br><span class="line">这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序</span><br><span class="line">var[常用</span><br><span class="line">这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日</span><br><span class="line">志文件</span><br><span class="line">/selinux [security-enhanced linux]</span><br><span class="line">SELinux是一种安全子系统，它能控制程序只能访问特定文件，有三种工作模式，可以自行设置.</span><br></pre></td></tr></table></figure>

<h1 id="实际操作篇"><a href="#实际操作篇" class="headerlink" title="实际操作篇"></a>实际操作篇</h1><h3 id="远程登录"><a href="#远程登录" class="headerlink" title="远程登录"></a>远程登录</h3><p><strong>为什么需要远程登录Linux</strong><br>说明：公司开发时候，具体的应用场景是这样的<br>1.linux服务器是开发小组共享<br>2.正式上线的项目是运行在公网<br>3.因此程序员需要远程登录到Liux进行项目管理或者开发<br>4.画出简单的网络拓示意图（帮助理解）</p>
<p>5.远程登录客户端有Xshell6,Xftp6,我们学习使用Xshell和Xftp,其它的远程工具大同小异</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Xshell 远程登录</span><br><span class="line">Xftp   文件传输</span><br></pre></td></tr></table></figure>

<h3 id="vi和vim编辑器"><a href="#vi和vim编辑器" class="headerlink" title="vi和vim编辑器"></a>vi和vim编辑器</h3><p>Linux系统会内置i文本编辑器<br>Vim具有程序编辑的能力，可以看做是Vi的增强版本，可以主动的以字体颜色辨别语法的正确性<br>方便程序设计。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。</p>
<p>vim的三种模式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">●正常模式</span><br><span class="line">以打开一个档案就直接进入一般模式了（这是默认的模式）。在这个模式中，你可以使用『上下左右」按键来移动光标，你可以使用『删除字符」或『删除整行」来处理档案内容，也可以使用『复制、粘贴」来处理你的文件数据。</span><br><span class="line">●插入模式</span><br><span class="line">按下i,I,o,O,a,A,r,R等任何一个字母之后才会进入编辑模式，一般来说按i即可.</span><br><span class="line">●命令行模式</span><br><span class="line">在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开Vim、显示行号等的动作则是在此模式中达成的！</span><br></pre></td></tr></table></figure>

<p><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/image-20240916115919525_20240927140852015457.png" alt="image-20240916115919525" title="vi和vim各个模式切换图"></p>
<p>快捷键使用练习</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.拷贝当前行 yy,拷贝当前行向下的5行5yy,并粘贴(输入p)。</span><br><span class="line">2.删除当前行<span class="built_in">dd</span>,删除当前行向下的5行5dd</span><br><span class="line">3.在文件中查找某个单词[命令行下/关键字，回车 查找，输入n就是查找下一个]</span><br><span class="line">4.设置文件的行号，取消文件的行号.[命令行下：<span class="built_in">set</span> nu和<span class="built_in">set</span> nonu)</span><br><span class="line">5.编辑/etc/profile文件，在一般模式下，使用快捷键到该文档的最末行[G]和最首行[gg]</span><br><span class="line">6.在一个文件中输入<span class="string">&quot;hello”,然后又撤销这个动作 u</span></span><br><span class="line"><span class="string">7.编辑/etc/profile文件，并将光标移动到 20行shift+g</span></span><br><span class="line"><span class="string">8.更多的看整理的文档</span></span><br></pre></td></tr></table></figure>

<h3 id="开机重启和用户登录注销"><a href="#开机重启和用户登录注销" class="headerlink" title="开机重启和用户登录注销"></a>开机重启和用户登录注销</h3><p>关机&amp;重启命令</p>
<p>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h now  立该进行关机</span><br><span class="line">shudown  -h 1    <span class="string">&quot;hello,1分钟后会关机了&quot;</span></span><br><span class="line">shutdown -r now  现在重新启动计算机</span><br><span class="line">halt             关机，作用和上面一样。</span><br><span class="line">reboot           现在重新启动计算机</span><br><span class="line"><span class="built_in">sync</span>             把内存的数据同步到磁盘，</span><br></pre></td></tr></table></figure>

<p>注意细节</p>
<p>1.不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中<br>2.目前的shutdown&#x2F;reboot&#x2F;halt等命令均已经在关机前进行了sync,老韩提醒：<strong>小心驶得万年船</strong></p>
<p>用户登录和注销<br>●基本介绍<br>1.登绿时尽量少用root帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用<br>普通用户登录，登录后再用”su - 用户名’命令来切换成系统管理员身份.<br>2.在提示符下输入logout即可注销用户<br>●使用细节<br>1.logout注销指令在图形运行级别无效，在运行级别3下有效，<br>2.运行级别这个概念，后面给大家介绍</p>
<h3 id="实用指令"><a href="#实用指令" class="headerlink" title="实用指令"></a>实用指令</h3><p>基本介绍<br>L山x系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统<br>管理员申请一个账号，然后以这个账号的身份进入系统<br>●<strong>添加用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line">useradd 用户名</span><br></pre></td></tr></table></figure>

<p>应用案例<br>案例1：添加一个用户milan</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 细节说明</span></span><br><span class="line">1.当创建用户成功后，会自动的创建和用户同名的家目录</span><br><span class="line">2.也可以通过useradd -d 指定目录 新的用户名，给新创建的用户指定家目录</span><br></pre></td></tr></table></figure>

<p>●<strong>指定&#x2F;修改密码</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line">passwd 用户名</span><br></pre></td></tr></table></figure>

<p>应用案例<br>给milan指定密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">passwd milan</span><br><span class="line"><span class="comment"># 显示当前用户所在的目录</span></span><br><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<p>●<strong>删除用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line">userdel 用户名</span><br></pre></td></tr></table></figure>

<p>应用案例<br>1.删除用户milan,但是要保留家目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel milan</span><br></pre></td></tr></table></figure>

<p>2.删除用户以及用户主目录，比如tom（要慎重使用）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r tom</span><br></pre></td></tr></table></figure>

<p>细节说明是否保留家目录的讨论？（一般建议保留）</p>
<p>●<strong>查询用户信息指令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line"><span class="built_in">id</span> 用户名</span><br></pre></td></tr></table></figure>

<p>应用实例<br>案例：请查询root 信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> root</span><br></pre></td></tr></table></figure>

<p>细节说明<br>当用户不存在时，返回无此用户</p>
<p>●<strong>切换用户</strong><br>介绍<br>在操作Liux中，如果当前用户的权限不够，可以通过su - 指令，切换到高权限用户，比如root</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line">su - 切换用户名</span><br></pre></td></tr></table></figure>

<p>应用实例<br>创建一个用户jack,指定密码，然后切换到jack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加用户</span></span><br><span class="line">useradd jack</span><br><span class="line"><span class="comment"># 切换到jack</span></span><br><span class="line">su - jack</span><br></pre></td></tr></table></figure>

<p>细节说明<br>1.从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。<br>2.当需要返回到原来用户时，使用exit&#x2F;logout指令</p>
<p>●<strong>查看当前用户&#x2F;登录用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法（显示的是登录的账户信息）</span></span><br><span class="line"><span class="built_in">whoami</span>/who am I</span><br></pre></td></tr></table></figure>

<p>●<strong>用户组</strong><br>介绍<br>类似于角色，系统可以对有共性的多个用户进行统一的管理<br>新增组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd 组名</span><br></pre></td></tr></table></figure>

<p>删除组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 组名</span><br></pre></td></tr></table></figure>

<p>增加用户时直接加上组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g 用户组 用户名</span><br></pre></td></tr></table></figure>

<p>增加一个用户zwj,直接将他指定到wudang</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增组</span></span><br><span class="line">groupadd wudang</span><br><span class="line"><span class="comment"># 将用户zwj直接指定到wudang组</span></span><br><span class="line">useradd -g wudang zwj</span><br><span class="line"><span class="comment"># 查询用户zwj的信息</span></span><br><span class="line"><span class="built_in">id</span> zwj</span><br></pre></td></tr></table></figure>

<p>修改用户的组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g 用户组 用户名</span><br></pre></td></tr></table></figure>

<p>创建一个组mojiao，把zwj放入到mojiao</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建mojiao组</span></span><br><span class="line">groupadd mojiao</span><br><span class="line"><span class="comment"># 把zwj切换到mojiao组</span></span><br><span class="line">usermod -g mojiao zwj</span><br></pre></td></tr></table></figure>

<p>●<strong>用户和组相关文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">●/etc/passwd文件</span><br><span class="line">用户(user)的配置文件，记录用户的各种信息</span><br><span class="line">每行的含义：用户名：口令：用户标识号：组标识号：注释性描述：主目录：登录Shell</span><br><span class="line">●/etc/shadow文件</span><br><span class="line">口令的配置文件</span><br><span class="line">每行的含义：登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时</span><br><span class="line">间：失效时间：标志</span><br><span class="line">●/etc/group文件</span><br><span class="line">组(group)的配置文件，记录Linux包含的组的信息</span><br><span class="line">每行含义：组名：口令：组标识号：组内用户列表</span><br></pre></td></tr></table></figure>

<p>●<strong>指定运行级别</strong><br>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">运行级别说明：</span><br><span class="line">0:关机</span><br><span class="line">1:单用户【找回丢失密码】</span><br><span class="line">2:多用户状态没有网络服务</span><br><span class="line">3:多用户状态有网络服务</span><br><span class="line">4:系统未使用保留给用户</span><br><span class="line">5:图形界面</span><br><span class="line">6:系统重启</span><br><span class="line">常用运行级别是3和5，也可以指定默认运行级别，后面演示</span><br></pre></td></tr></table></figure>

<p>应用实例<br>命令：init[0123456]应用案例：通过init来切换不同的运行级别，比如动5-3，然后关机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关机</span></span><br><span class="line">int 0</span><br><span class="line"><span class="comment"># 多用户状态有网络服务</span></span><br><span class="line">init 3</span><br><span class="line"><span class="comment"># 图形界面</span></span><br><span class="line">init 5</span><br></pre></td></tr></table></figure>

<p>设置默认级别</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">centos7以前</span><br><span class="line"><span class="comment"># 查看默认级别</span></span><br><span class="line">systemctl get-default</span><br><span class="line"><span class="comment"># 设置默认级别，这里相当于级别3（工作中用3 这个级别）</span></span><br><span class="line">systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure>

<p>●<strong>找回root密码</strong><br>面试题<br>如何找回root密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.首先，启动系统，进入开机界面，在界面中按“e”进入编辑界面。</span><br><span class="line">2.进入编辑界面，使用键盘上的上下键把光标往下移动，找到以“Linux16”开头内容所在的行数”，在行的最后面输入 init=bin/sh</span><br><span class="line">3.接着，输入完成后，直接按快捷键 Ctrl+x 进入单用户模式。</span><br><span class="line">4.接着，在光标闪烁的位置中输入：mount -o remount,rw / (注意：各个单词间有空格)，完成后按键盘的回车键(Enter)。</span><br><span class="line">5.在新的一行最后面输入 passwd</span><br><span class="line">完成后按键盘的回车键(Eter)。输入密码，然后再次确认密码即可（韩顺平提示：密码长度最好8位以上，但不是必须的)，密码修改成功后，会显示passwd.....的样式，说明密码修改成功</span><br><span class="line">6.接着，在鼠标闪烁的位置中（最后一行中）输入 <span class="built_in">touch</span> /.autorelabel(注意：<span class="built_in">touch</span>与/后面有一个空格)，完成后按键盘的回车键(Enter)</span><br><span class="line">7.继续在光标闪烁的位置中，输入 <span class="built_in">exec</span> /sbin/init(注意：<span class="built_in">exec</span>与/后面有一个空格)，完成后按键盘的回车键(Enter),等待系统自动修改密码（韩顺平提示：这个过程时间可能有点长，耐心等待），完成后，系统会自动重启，新的密码生效了</span><br></pre></td></tr></table></figure>

<p>课堂练习<br>1.假设root密码忘记了，请问如何找回密码<br>2.设置运行级别，Iiux运行后，直接进入到命令行终端(3)</p>
<p>●<strong>帮助指令</strong><br>●man获得帮助信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法：（功能猫述：获得帮助信息）</span><br><span class="line">man [命令或配置文件]</span><br></pre></td></tr></table></figure>

<p>案例：查看ls命令的帮助信息（在linux下隐藏文件是以.开头的）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看ls命令的帮助信息</span></span><br><span class="line">man <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line">q</span><br></pre></td></tr></table></figure>

<p>●help指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法：（功能描述：获得shell内置命令的帮助信息）</span><br><span class="line"><span class="built_in">help</span> 命令</span><br></pre></td></tr></table></figure>

<p>案例：查看cd命令的帮助信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span> <span class="built_in">cd</span></span><br></pre></td></tr></table></figure>

<p>●百度帮助更直接<br>如果英语不太好的，也可以直接百度靠谱。</p>
<p>●<strong>文件目录类</strong><br>●pwd指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法：(功能描述：显示当前工作目录的绝对路径)</span><br><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>


<p>●ls指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本语法：<span class="built_in">ls</span> [选项] [目录或是文件]</span><br><span class="line">常用选项</span><br><span class="line">-a:显示当前目录所有的文件和目录，包括隐藏的。</span><br><span class="line">-l:以列表的方式显示信息</span><br></pre></td></tr></table></figure>

<p>应用实例<br>案例：查看当前目录的所有内容信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a</span><br></pre></td></tr></table></figure>

<p>●cd指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基本语法：<span class="built_in">cd</span> [参数]</span><br><span class="line">(功能描述：切换到指定目录)</span><br><span class="line">理解：绝对路径和相对路径</span><br><span class="line"><span class="built_in">cd</span> ~  或者<span class="built_in">cd</span> :回到自己的家目录</span><br><span class="line"><span class="built_in">cd</span> .. 回到当前目录的上一级目录</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例1：使用绝对路径切换到root目录</span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line">案例2：使用相对路径到/root目录</span><br><span class="line">例如：<span class="built_in">cd</span> ../../root</span><br><span class="line">案例3：表示回到当前目录的上一级目录</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">案例4：回到家目录</span><br><span class="line"><span class="built_in">cd</span> ~</span><br></pre></td></tr></table></figure>

<p>●mkdir指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span>指令用于创建目录(默认只能创建单级目录)</span><br><span class="line">基本语法：<span class="built_in">mkdir</span> [选项] 要创建的目录</span><br><span class="line">常用选项</span><br><span class="line">-p:创建多级目录</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：创建一个目录/home/dog</span><br><span class="line"><span class="built_in">mkdir</span> /home/dog</span><br><span class="line">案例2：创建多级目录/home/animal/tiger</span><br><span class="line"><span class="built_in">mkdir</span> -p /home/animal/tiger</span><br></pre></td></tr></table></figure>

<p>●rmdir指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span>指令删除空目录</span><br><span class="line">基本语法</span><br><span class="line"><span class="built_in">rmdir</span> [选项] 要删除的空目录</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例：删除一个目录/home/dog</span><br><span class="line"><span class="built_in">rmdir</span> /home/dog</span><br></pre></td></tr></table></figure>

<p>使用细节<br>rmdir删除的是<strong>空目录</strong>，如果目录下有内容时无法删除的。<br>提示：如果需要删除<strong>非空目录</strong>，需要使用<strong>rm -rf</strong> 要删除的目录</p>
<p>●touch:指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span>指令创建空文件</span><br><span class="line">基本语法</span><br><span class="line"><span class="built_in">touch</span> 文件名称</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例：创建一个空文件hello.txt</span><br><span class="line"><span class="built_in">touch</span> hello.txt</span><br></pre></td></tr></table></figure>

<p>●cp指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span>指冷拷贝文件到指定目录</span><br><span class="line">√基本语法</span><br><span class="line"><span class="built_in">cp</span> [选项] <span class="built_in">source</span> dest</span><br><span class="line">√常用选项</span><br><span class="line">-r:递归复制整个文件夹</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：将/home/hello.txt拷贝到home/bbb目录下</span><br><span class="line"><span class="built_in">cp</span> /home/hello.txt /home/bbb/</span><br><span class="line">案例2：递归复制整个文件夹，举例,比如将/home/bbb整个目录，拷贝到/opt</span><br><span class="line"><span class="built_in">cp</span> -r /home/bbb/ /opt/</span><br></pre></td></tr></table></figure>

<p>使用细节<br>强制覆盖不提示的方法：\cp</p>
<p>●rm指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">说明：<span class="built_in">rm</span>指令移除文件或目录</span><br><span class="line">基本语法</span><br><span class="line"><span class="built_in">rm</span> [选项] 要删除的文件或目录</span><br><span class="line">常用选项</span><br><span class="line">-r:递归删除整个文件夹</span><br><span class="line">-f：强制删除不提示</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：将/home/hello.txt删除</span><br><span class="line"><span class="built_in">rm</span> -f /home/hello.txt</span><br><span class="line">案例2：递归删除整个文件夹/home/bbb</span><br><span class="line"><span class="built_in">rm</span> -rf /home/bbb</span><br></pre></td></tr></table></figure>

<p>使用细节<br>强制删除不提示的方法：带上 -f参数即可</p>
<p>●mv指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span>移动文件与目录或重命名</span><br><span class="line">基本语法</span><br><span class="line"><span class="built_in">mv</span> oldNameFile newNameFile (功能描述：重命名)</span><br><span class="line"><span class="built_in">mv</span> /temp/movefile /targetFolder (功能描述：移动文件)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">案例1：将/home/cat.txt文件重新命名为pig.txt</span><br><span class="line"><span class="built_in">mv</span> cat.txt pig.txt</span><br><span class="line">案例2：将/home/pig.txt文件移动到/root目录下</span><br><span class="line"><span class="built_in">mv</span> /home/pigt.xt /root/</span><br><span class="line">案例3：移动整个目录，比如将/opt/bbb移动到/home下</span><br><span class="line"><span class="built_in">mv</span> /opt/bbb /home</span><br></pre></td></tr></table></figure>

<p>●cat指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span>查看文件内容</span><br><span class="line">基本语法</span><br><span class="line"><span class="built_in">cat</span> [选项] 要查看的文件</span><br><span class="line">常用选项</span><br><span class="line">-n:显示行号</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例1：/etc/profile文件内容，并显示行号</span><br><span class="line"><span class="built_in">cat</span> -n /etc/profile</span><br></pre></td></tr></table></figure>

<p>使用细节<br>cat只能浏览文件，而不能修改文件，为了浏览方便，一般会带上<strong>管道命令</strong> | more</p>
<p>●more指令<br>more指令是一个基于VI编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。more<br>指令中内置了若干快捷键(交互指令)，详见操作说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">more 要查看的文件</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例：采用more查看文件 /etc/profile</span><br><span class="line">more /etc/profile</span><br></pre></td></tr></table></figure>

<p>操作说明</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>空白键(space)</td>
<td>代表向下翻一页；</td>
</tr>
<tr>
<td>Enter</td>
<td>代表向下翻『一行」；</td>
</tr>
<tr>
<td>q</td>
<td>代表立刻离开more,不再显示该文件内容。</td>
</tr>
<tr>
<td>Ctrl+F</td>
<td>向下滚动一屏</td>
</tr>
<tr>
<td>Ctrl+B</td>
<td>返回上一屏</td>
</tr>
<tr>
<td>&#x3D;</td>
<td>输出当前行的行号</td>
</tr>
<tr>
<td>:f</td>
<td>输出文件名和当前行的行号</td>
</tr>
</tbody></table>
<p>●Iess指令<br>Iess指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支持各<br>种显示终端。Iess指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示<br>需要加载内容，对于显示大型文件具有较高的效率。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">less 要查看的文件</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例：采用less查看一个大文件文件 /opt/杂文.txt</span><br><span class="line">less /opt/杂文.txt</span><br></pre></td></tr></table></figure>

<p>操作说明</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>空白键</td>
<td>向下翻动一页；</td>
</tr>
<tr>
<td>[pagedown]</td>
<td>向下翻动一页</td>
</tr>
<tr>
<td>[pageup]</td>
<td>向上翻动一页；</td>
</tr>
<tr>
<td>&#x2F;字串</td>
<td>向下搜寻『字串』的功能；n:向下查找；N:向上查找；</td>
</tr>
<tr>
<td>?字串</td>
<td>向上搜寻『字串』的功能；n:向上查找；N:向下查找；</td>
</tr>
<tr>
<td>q</td>
<td>离开less这个程序，</td>
</tr>
</tbody></table>
<p>●echo指令<br>echo输出内容到控制台</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">echo</span> [选项] [输出内容]</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例：使用<span class="built_in">echo</span>指令输出环境变量,比如输出<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span> </span><br><span class="line">案例：使用<span class="built_in">echo</span>指令输出hello,world!</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello,world!&quot;</span></span><br></pre></td></tr></table></figure>

<p>●head指令<br>head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">head</span> 文件 (功能描述：查看文件头10行内容)</span><br><span class="line"><span class="built_in">head</span> -n 5 文件 (功能描述：查看文件头5行内容，5可以是任意行数)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例：查看/etc/profile的前面5行代码</span><br><span class="line"><span class="built_in">head</span> -n 5 /etc/profile</span><br></pre></td></tr></table></figure>

<p>●tail指令<br>tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的前10行内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">1)<span class="built_in">tail</span> 文件      (功能描述：查看文件尾10行内容)</span><br><span class="line">2)<span class="built_in">tail</span> -n 5 文件 (功能描述：查看文件尾5行内容，5可以是任意行数)</span><br><span class="line">3)<span class="built_in">tail</span> -f 文件   (功能描述：实时追踪该文档的所有更新)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">案例1：查看/etc/profile最后5行的代码</span><br><span class="line"><span class="built_in">tail</span> -n 5 /etc/profile</span><br><span class="line">案例2：实时监控mydate.txt,看看到文件有变化时，是否看到，实时的追加日期</span><br><span class="line"><span class="built_in">tail</span> -f mydate.txt</span><br><span class="line">ctrl+c 退出</span><br></pre></td></tr></table></figure>

<p>●&gt;指冷和&gt;&gt;指冷</p>
<p>说明：&gt;  输出重定向 和  &gt;&gt; 追加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">1)<span class="built_in">ls</span> -l &gt; 文件       (功能描述：列表的内容写入文件a.txt中（覆盖写）)</span><br><span class="line">2)<span class="built_in">ls</span> -al &gt;&gt; 文件     (功能描述：列表的内容追加到文件aa.txt的末尾)</span><br><span class="line">3)<span class="built_in">cat</span> 文件1 &gt; 文件2   (功能描述：将文件1的内容覆盖到文件2)</span><br><span class="line">4)<span class="built_in">echo</span> <span class="string">&quot;内容&quot;</span> &gt;&gt; 文件 (功能描述：追加)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：将/home目录下的文件列表写入到/home/info.txt中</span><br><span class="line"><span class="built_in">ls</span> -l /home &gt; /home/info.txt [如果info.txt没有，则会自动创建]</span><br><span class="line">案例2：将当前日历信息追加到/home/mycal文件中</span><br><span class="line">cal &gt;&gt; /home/mycal [cal就是显示日历信息]</span><br></pre></td></tr></table></figure>

<p>●ln指令<br>软链接也称为符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">ln</span> -s [原文件或目录] [软链接名]（功能描述：给原文件创建一个软链接）</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：在/home目录下创建一个软连接myroot,连接到/root目录</span><br><span class="line"><span class="built_in">ln</span> -s /root /home/myroot</span><br><span class="line">案例2：删除软连接myroot</span><br><span class="line"><span class="built_in">rm</span> -f /home/myroot</span><br></pre></td></tr></table></figure>

<p>√细节说明<br>当我们使用pwd指令查看目录时，仍然看到的是软链接所在目录。</p>
<p>●history指令<br>查看已经执行过历史命令，也可以执行历史指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">history</span> (功能描述：查看已经执行过历史命令)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">案例1：显示所有的历史命令</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line">案例2：显示最近使用过的10个指令。</span><br><span class="line"><span class="built_in">history</span> 10</span><br><span class="line">案例3：执行历史编号为5的指令</span><br><span class="line">!5 </span><br></pre></td></tr></table></figure>

<p><strong>时间日期类</strong><br>●date指令-显示当前日期</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">1)<span class="built_in">date</span>       				(功能描述：显示当前时间)</span><br><span class="line">2)<span class="built_in">date</span> +%Y    				(功能描述：显示当前年份)</span><br><span class="line">3)<span class="built_in">date</span> +%m 					(功能描述：显示当前月份)</span><br><span class="line">4)<span class="built_in">date</span> +%d					(功能描述：显示当前是哪一天)</span><br><span class="line">5)<span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>  (功能描述：显示年月日时分秒)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">案例1：显示当前时间信息</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line">案例2：显示当前时间年月日</span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d&quot;</span></span><br><span class="line">案例3：显示当前时间年月日时分秒</span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span></span><br></pre></td></tr></table></figure>

<p>●date指令-设置日期</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">date</span> -s 字符串时间</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例1：设置系统当前时间，比如设置成2021-11-11 11:22:22</span><br><span class="line"><span class="built_in">date</span> -s <span class="string">&quot;2021-11-11 11:22:22&quot;</span></span><br></pre></td></tr></table></figure>

<p>●cal指令<br>查看日历指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">cal [选项] (功能描述：不加选项，显示本月日历)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：显示当前日历</span><br><span class="line">cal</span><br><span class="line">案例2：显示2020年日历</span><br><span class="line">cal 2020</span><br></pre></td></tr></table></figure>

<p><strong>搜索查找类</strong><br>●find指令<br>fid指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">find [搜索范围] [选项]</span><br></pre></td></tr></table></figure>

<p>选项说明</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-name&lt;查询方式&gt;</td>
<td>按照指定的文件名查找模式查找文件</td>
</tr>
<tr>
<td>-user&lt;用户名&gt;</td>
<td>查找属于指定用户名所有文件</td>
</tr>
<tr>
<td>-size&lt;文件大小&gt;</td>
<td>按照指定的文件大小查找文件。</td>
</tr>
</tbody></table>
<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">案例1：按文件名：根据名称查找/home目录下的hello.txt文件</span><br><span class="line">find /home -name hello.txt</span><br><span class="line">案例2：按拥有者：查找/opt目录下，用户名称为nobody的文件</span><br><span class="line">find /opt -user nobody</span><br><span class="line">案例3：查找整个linux系统下大于200M的文件(+n大于 -n小于 n等于,单位有k，M，G)</span><br><span class="line">find / -size +200M</span><br></pre></td></tr></table></figure>

<p>●locate指令<br>locate指令可以快速定位文件路径。locate指令利用事先建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件。Locate指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新locatel时刻</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">locate 搜索文件</span><br></pre></td></tr></table></figure>

<p>特别说明<br>由于locate指令基于数据库进行查询，所以<strong>第一次</strong>运行前，必须使用<strong>updatedb</strong>指令创建locate数据库。<br>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例1：请使用locate指令快速定位hello.txt文件所在目录</span><br><span class="line">locate hello.txt</span><br></pre></td></tr></table></figure>

<p>which指令，可以查看某个指令在哪个目录下，比如ls指令在哪个目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

<p>●grep指令和管道符号<br>grep过滤查找，管道符，“|”,表示将前一个命令的处理结果输出传递给后面的命令处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">grep [选项] 查找内容 源文件</span><br></pre></td></tr></table></figure>

<p>常用选项</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>显示匹配行及行号。</td>
</tr>
<tr>
<td>-i</td>
<td>忽略字母大小写</td>
</tr>
</tbody></table>
<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">案例1：请在hello.txt文件中，查找<span class="string">&quot;yes”所在行，并且显示行号</span></span><br><span class="line"><span class="string">cat /home/hello.txt | grep -n &quot;</span><span class="built_in">yes</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">grep -n &quot;</span><span class="built_in">yes</span><span class="string">&quot; /home/hello.txt</span></span><br></pre></td></tr></table></figure>

<p><strong>压缩和解压类</strong><br>●gzip&#x2F;gunzip指令<br>gzip用于压缩文件，gunzip用于解压的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">gzip 文件       (功能描述：压缩文件，只能将文件压缩为*gz文件）</span><br><span class="line">gunzip 文件.gz  (功能描述：解压缩文件命令)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：gzip压缩，将/home下的hello.txt文件进行压缩</span><br><span class="line">gzip /home/hello.txt</span><br><span class="line">案例2：gunzip压缩，将/home下的hello.txt.gz文件进行解压缩</span><br><span class="line">gunzip /home/hello.txt.gz</span><br></pre></td></tr></table></figure>

<p>●zip&#x2F;unzip指令<br>zip用于压缩文件，uzip用于解压的，这个在项目打包发布中很有用的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">zip [选项列XXX.zip 将要压缩的内容   (功能描述：压缩文件和目录的命令)</span><br><span class="line">unzip [选项]XXX.zip              (功能描述：解压缩文件)</span><br><span class="line">zip常用选项</span><br><span class="line">-r:递归压缩，即压缩目录</span><br><span class="line">unzip的常用选项</span><br><span class="line">-d&lt;目录&gt;：指定解压后文件的存放目录</span><br></pre></td></tr></table></figure>


<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：将/home下的所有文件进行压缩成myhome.zip</span><br><span class="line">zip -r myhome.zip /home/ [将home文件夹下的所有内容都压缩了，包括home]</span><br><span class="line">案例2：将myhome.zip解压到/opt/tmp目录下</span><br><span class="line">unzip -d /opt/tmp /home/myhome.zip</span><br></pre></td></tr></table></figure>

<p>●tar指令<br>tar指令是打包指令，最后打包后的文件是.tar.gz的文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">tar [选项] XXX.tar.gz 打包的内容 (功能描述：打包目录，压缩后的文件格式.tar.gz)</span><br></pre></td></tr></table></figure>

<p>选项说明</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>产生.tar打包文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示详细信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定压缩后的文件名</td>
</tr>
<tr>
<td>-z</td>
<td>打包同时压缩</td>
</tr>
<tr>
<td>-x</td>
<td>解包.tar文件</td>
</tr>
</tbody></table>
<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">案例1：压缩多个文件，将/home/pig.txt和/home/cat.txt压缩成pc.tar.gz</span><br><span class="line">tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt</span><br><span class="line">案例2：将/home的文件夹压缩成myhome.tar.gz</span><br><span class="line">tar -zcvf myhome.tar.gz /home/</span><br><span class="line">案例3：将pc.tar.gz解压到当前目录</span><br><span class="line">tar -zxvf pc.tar.gz</span><br><span class="line">案例4：将myhome.tar.gz解压到/opt/tmp2目录下</span><br><span class="line"><span class="built_in">mkdir</span> /opt/tmp2</span><br><span class="line">tar -zxvf /home/myhome.tar.gz -C /opt/tmp2</span><br></pre></td></tr></table></figure>

<p><strong>Linux组基本介绍</strong><br>在iux中的每个用户必须属于一个组，不能独立于组外。在iux中每个文件<br>有所有者、所在组、其它组的概念。<br>1.所有者<br>2.所在组<br>3.其它组<br>4.改变用户所在的组</p>
<p>●文件&#x2F;目录所有者<br>般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看文件的所有者</span><br><span class="line">指令:<span class="built_in">ls</span> -ahl</span><br></pre></td></tr></table></figure>

<p>●修改文件所有者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">指令：<span class="built_in">chown</span> 用户名 文件名</span><br></pre></td></tr></table></figure>

<p>应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">要求：使用root创建一个文件apple.txt, 然后将其所有者修改成tom</span><br><span class="line"><span class="built_in">touch</span> apple.txt</span><br><span class="line"><span class="built_in">chown</span> tom apple.txt</span><br></pre></td></tr></table></figure>

<p>●组的创建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本指令</span><br><span class="line">groupadd 组名</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建一个组，monster</span><br><span class="line">groupadd monster</span><br><span class="line">创建一个用户fox,并放入到monster组中</span><br><span class="line">useradd -g monster fox</span><br></pre></td></tr></table></figure>

<p>●修改文件所在的组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本指令</span><br><span class="line"><span class="built_in">chgrp</span> 组名 文件名</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用root用户创建文件orange.txt,看看当前这个文件属于哪个组，然后将这个文件所在组，修改到</span><br><span class="line">fruit组。</span><br><span class="line"><span class="comment"># 进入到/home目录</span></span><br><span class="line"><span class="built_in">cd</span> /home</span><br><span class="line"><span class="comment"># 创建fruit组</span></span><br><span class="line">groupadd fruit</span><br><span class="line"><span class="comment"># 创建orange.txt 文件</span></span><br><span class="line"><span class="built_in">touch</span> orange.txt</span><br><span class="line"><span class="comment"># 查看文件属于哪个组</span></span><br><span class="line"><span class="built_in">ls</span> -ahl</span><br><span class="line"><span class="comment"># 修改到fruit组</span></span><br><span class="line"><span class="built_in">chgrp</span> fruit orange.txt</span><br></pre></td></tr></table></figure>

<p>●其它组<br>除文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组<br><strong>●</strong>改变用户所在组<br>在添加用户时，可以指定将该用户添加到哪个组中，同样的用root的管理权限可以改变某个用户所在的组。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">改变用户所在组</span><br><span class="line">1.usermod -g 组名 用户名</span><br><span class="line">2.usermod -d 目录名 用户名 改变该用户登陆的初始目录。</span><br><span class="line">特别说明：用户需要有进入到新目录的权限</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将zwj这个用户从原来所在组，修改到wudang组。</span><br><span class="line">usermod -g wudang zwj</span><br></pre></td></tr></table></figure>

<p><strong>权限的基本介绍</strong><br>ls -l中显示的内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc</span><br></pre></td></tr></table></figure>

<p>0-9位说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 第0位确定文件类型(d,-,l,c,b)</span><br><span class="line">	l是链接，相当于windows的快捷方式</span><br><span class="line">	d是目录，相当于windows的文件夹</span><br><span class="line">	c是字符设各文件，鼠标，键盘</span><br><span class="line">	b是块设备，比如硬盘</span><br><span class="line">2.第1-3位确定所有者（该文件的所有者）拥有该文件的权限。---User</span><br><span class="line">3.第4-6位确定所属组（同用户组的）拥有该文件的权限，---Group</span><br><span class="line">4.第7-9位确定其他用户拥有该文件的权限---Other</span><br></pre></td></tr></table></figure>

<p><strong>rwx权限详解</strong><br>●rwx作用到文件<br>1.[r]代表可读(read):可以读取，查看<br>2.[w]代表可写(write):可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件。<br>3.[x]代表可执行(execute):可以被执行<br>●rwx作用到目录<br>1.[r]代表可读(read):可以读取，Is查看目录内容<br>2.[w]代表可写(write):可以修改，对目录内创建+删除+重命名目录<br>3.[x]代表可执行(execute):可以进入该目录</p>
<p><strong>文件及目录权限实际案例</strong><br>ls -l 中显示的内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc</span><br></pre></td></tr></table></figure>

<p>10个字符确定不同用户能对文件干什么</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">第一个字符代表文件类型：- l d c b</span><br><span class="line">其余字符每3个一组(rwx) 读(r) 写(w) 执行(x)</span><br><span class="line">第一组rwx:文件 拥有者 的权限是读、写和执行</span><br><span class="line">第二组rw-:与文件拥有者 同一组 的用户的权限是读、写但不能执行</span><br><span class="line">第三组r--：不与文件拥有者同组的 其他用户 的权限是读不能写和执行</span><br><span class="line">可用数字表示为：r=4,w=2,x=1 因此rwx=4+2+1=7</span><br></pre></td></tr></table></figure>

<p>其它说明</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>文件：硬连接数 或 目录：子目录数</td>
</tr>
<tr>
<td>root</td>
<td>用户</td>
</tr>
<tr>
<td>root</td>
<td>组</td>
</tr>
<tr>
<td>1213</td>
<td>文件大小（字节），如果是文件夹，显示4096字节</td>
</tr>
<tr>
<td>Feb 2 09:39</td>
<td>最后修改日期</td>
</tr>
<tr>
<td>abc</td>
<td>文件名</td>
</tr>
</tbody></table>
<p> <strong>修改权限-chmod</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本说明：</span><br><span class="line">通过<span class="built_in">chmod</span>指令，可以修改文件或者目录的权限。</span><br></pre></td></tr></table></figure>

<p>●第一种方式：+、-、&#x3D;变更权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">u:所有者 g:所有组 o:其他人 a:所有人(u、g、o的总和)</span><br><span class="line">1)<span class="built_in">chmod</span> u=rwx,g=rx,o=x 文件/目录名</span><br><span class="line">2)<span class="built_in">chmod</span> o+w 文件/目录名</span><br><span class="line">3)<span class="built_in">chmod</span> a-x 文件/目录名</span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1)给abc文件的所有者读写执行的权限，给所在组读执行权限，给其它组读执行权限。</span><br><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=rx abc</span><br><span class="line">2)给abc文件的所有者除去执行的权限，增加组写的权限</span><br><span class="line"><span class="built_in">chmod</span> u-x,g+w abc</span><br><span class="line">3)给abc文件的所有用户添加读的权限</span><br><span class="line"><span class="built_in">chmod</span> a+r abc</span><br></pre></td></tr></table></figure>

<p>●第二种方式：通过数字变更权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r=4 w=2 x=1 rwx=4+2+1=7</span><br><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=x 文件目录名</span><br><span class="line">相当于<span class="built_in">chmod</span> 751 文件目录名</span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">要求：将/home/abc.txt文件的权限修改成rwxr-xr-x,使用给数字的方式实现：</span><br><span class="line"><span class="built_in">chmod</span> 755 /home/abc.txt</span><br></pre></td></tr></table></figure>

<p><strong>修改文件所有者-chown</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本介绍</span><br><span class="line"><span class="built_in">chown</span> newowner 文件/目录 (功能描述：改变所有者)</span><br><span class="line"><span class="built_in">chown</span> newowner:newgroup (功能描述：文件/目录改变所有者和所在组)</span><br><span class="line">-R 如果是目录 则使其下所有子文件或目录递归生效</span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请将/home/abc.txt 文件的所有者修改成tom</span><br><span class="line"><span class="built_in">chown</span> tom /home/abc.txt</span><br><span class="line">请将/home/kkk 目录下所有的文件和目录的所有者都修改成tom</span><br><span class="line"><span class="built_in">chown</span> -R tom /home/kkk </span><br></pre></td></tr></table></figure>

<p><strong>修改文件&#x2F;目录所在组-chgrp</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本介绍</span><br><span class="line"><span class="built_in">chgrp</span> newgroup 文件/目录 (功能描述：改变所在组)</span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">请将/home/abc.txt 文件的所在组修改成 shaolin(少林)</span><br><span class="line"><span class="comment"># 添加shaolin组</span></span><br><span class="line">groupadd shaolin</span><br><span class="line"><span class="comment"># 将文件所在组修改为shaolin</span></span><br><span class="line"><span class="built_in">chgrp</span> shaolin /home/abc.txt</span><br><span class="line">请将/home/kkk 目录下所有的文件和目录的所在组都修改成 shaolin(少林)</span><br><span class="line"><span class="built_in">chgrp</span> -R shaolin /home/kkk</span><br></pre></td></tr></table></figure>

<p><strong>最佳实践-警察和土匪游戏</strong><br>police bandit<br>jack,jerry:警察<br>xh,xq:土匪</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1.创建组</span><br><span class="line"><span class="comment"># 创建警察组</span></span><br><span class="line">groupadd police</span><br><span class="line"><span class="comment"># 创建土匪组</span></span><br><span class="line">groupadd bandit</span><br><span class="line">2.创建用户</span><br><span class="line"><span class="comment"># 创建jack，jerry用户并分配到警察组</span></span><br><span class="line">useradd -g police jack</span><br><span class="line">useradd -g police jerry</span><br><span class="line"><span class="comment"># 创建xh，xq用户并分配到土匪组</span></span><br><span class="line">useradd -g bandit xh</span><br><span class="line">useradd -g bandit xq</span><br><span class="line">3.jack创建一个文件，自己可以读写，本组人可以读，其它组没人任何权限</span><br><span class="line"><span class="comment"># 给jack用户设置密码</span></span><br><span class="line">passwd jack</span><br><span class="line"><span class="comment"># 使用jack用户登录，然后创建cat.txt文件</span></span><br><span class="line"><span class="built_in">touch</span> cat.txt</span><br><span class="line"><span class="comment"># 查看cat.txt文件的权限</span></span><br><span class="line"><span class="built_in">ls</span> -ahl</span><br><span class="line"><span class="comment"># 修改cat.txt文件的权限</span></span><br><span class="line"><span class="built_in">chmod</span> 640 cat.txt</span><br><span class="line">4.jack修改该文件，让其它组人可以读，本组人可以读写</span><br><span class="line"><span class="built_in">chmod</span> o=r,g=rw cat.txt</span><br><span class="line">5.xh投靠警察，看看是否可以读写.</span><br><span class="line">usermod -g police xh</span><br></pre></td></tr></table></figure>

<p><strong>课后练习</strong><br>练习文件权限管理[课堂练习]，完成如下操作.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">1.建立两个组（神仙(sx)妖怪(yg))</span><br><span class="line"><span class="comment"># 建立神仙组</span></span><br><span class="line">groupadd sx</span><br><span class="line"><span class="comment"># 建立妖怪组</span></span><br><span class="line">groupadd yg</span><br><span class="line">2.建立四个用户（唐僧，悟空，八戒，沙僧）</span><br><span class="line">useradd tangseng</span><br><span class="line">useradd wukong</span><br><span class="line">useradd bajie</span><br><span class="line">useradd shaseng</span><br><span class="line">3.设置密码</span><br><span class="line">passwd tagnseng</span><br><span class="line">passwd wukong</span><br><span class="line">passwd bajie</span><br><span class="line">passwd shaseng</span><br><span class="line">4.把悟空，八戒放入妖怪 唐僧，沙僧在神仙</span><br><span class="line">usermod -g yg wukong</span><br><span class="line">usermod -g yg bajie</span><br><span class="line">usermod -g sx tagnseng</span><br><span class="line">usermod -g sx shasneg</span><br><span class="line">5.用悟空建立一个文件(monkey.java该文件要输出i am monkey)</span><br><span class="line"><span class="comment"># 用wukong用户登录</span></span><br><span class="line">vim monkey.java</span><br><span class="line"><span class="comment"># 按i输入内容</span></span><br><span class="line">i ma monkey</span><br><span class="line"><span class="comment"># esc然后输入如下内容保存退出</span></span><br><span class="line">:wq</span><br><span class="line">6.给八戒一个可以rw的权限</span><br><span class="line">chomd g=rw wukong</span><br><span class="line"><span class="built_in">chmod</span> g=rw monkey.java</span><br><span class="line">7.八戒修改monkey.java加入一句话(i am pig)</span><br><span class="line"><span class="comment"># 用bajie用户登录,然后进入到wukong目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/wukong</span><br><span class="line"><span class="comment"># 打开monkey.java</span></span><br><span class="line">vim monkey.java</span><br><span class="line"><span class="comment"># 按i编辑，添加如下内容</span></span><br><span class="line">i ma pig</span><br><span class="line"><span class="comment"># 按esc，然后输入如下内容保存退出</span></span><br><span class="line">:wq</span><br><span class="line">8.唐僧 沙僧 对该文件没有权限</span><br><span class="line"><span class="comment"># 用root管理员登录，进入到wukong目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/wukong</span><br><span class="line"><span class="comment"># 修改文件权限</span></span><br><span class="line"><span class="built_in">chmod</span> 660 monkey.java</span><br><span class="line">9.把沙僧放入妖怪组</span><br><span class="line"><span class="comment"># 用root管理员登录</span></span><br><span class="line">usermod -g yg shaseng</span><br><span class="line">10.让沙僧修改该文件monkey,加入一句话(<span class="string">&quot;我是沙僧，我是妖怪！&quot;</span>)：</span><br><span class="line"><span class="comment"># 用shaseng用户登录，进入到wukong目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/wukong</span><br><span class="line"><span class="comment"># 打开monkey.java文件</span></span><br><span class="line">vim monkey.java</span><br><span class="line"><span class="comment"># 按i编辑，追加如下内容</span></span><br><span class="line"><span class="string">&quot;我是沙僧，我是妖怪！&quot;</span></span><br><span class="line"><span class="comment"># 按esc，然后输入如下内容保存退出</span></span><br><span class="line">:wq</span><br><span class="line">11.对文件夹rwx的细节讨论和测试！</span><br><span class="line">x:表示可以进入到该目录，比如<span class="built_in">cd</span></span><br><span class="line">r:表示可以<span class="built_in">ls</span>，将目录的内容显示</span><br><span class="line">w:表示可以在该目录，创建和删除文件</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.用root登录，建立用户mycentos,自己设定密码</span><br><span class="line"><span class="comment"># 用root登录，建立用户mycentos</span></span><br><span class="line">useradd mycentos</span><br><span class="line"><span class="comment"># 设置密码</span></span><br><span class="line">passwd mycentos</span><br><span class="line">2.用mycentos登录，在主目录下建立目录<span class="built_in">test</span>/t11/t1</span><br><span class="line"><span class="comment"># 用mycentos登录，创建多级目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /test/t11/t1 </span><br><span class="line">3.在t1中建立一个文本文件aa,用vim编辑其内容为<span class="built_in">ls</span> -al</span><br><span class="line"><span class="comment"># 进入到t1目录下</span></span><br><span class="line"><span class="built_in">cd</span> /test/t11/t1</span><br><span class="line"><span class="comment"># 创建aa.txt</span></span><br><span class="line">vim aa</span><br><span class="line"><span class="comment"># 按i编辑，输入</span></span><br><span class="line"><span class="built_in">ls</span> -al</span><br><span class="line"><span class="comment"># 按esc,然后输入如下指令保存并退出</span></span><br><span class="line">:wq [Enter]</span><br><span class="line">4.改变aa的权限为可执行文件[可以将当前日期追加到一个文件]，运行该文件./aa</span><br><span class="line"><span class="comment"># 修改aa文件的权限</span></span><br><span class="line"><span class="built_in">chmod</span> u+x aa</span><br><span class="line"><span class="comment"># 追加当前日期</span></span><br><span class="line"><span class="built_in">date</span> &gt;&gt; aa</span><br><span class="line"><span class="comment"># 运行该文件</span></span><br><span class="line">./aa</span><br><span class="line">5.删除新建立的目录<span class="built_in">test</span>/t11/t1</span><br><span class="line"><span class="comment"># 进入到跟目录</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="comment"># 删除新建的目录</span></span><br><span class="line"><span class="built_in">rm</span> -f /home/mycentos/test/t11/t1</span><br><span class="line">6.删除用户mycentos及其主目录中的内容</span><br><span class="line">userdel -r mycentos</span><br><span class="line">7.将linux设置成进入到图形界面的</span><br><span class="line">init 5</span><br><span class="line">8.重新启动linux或关机</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h3 id="定时任务调度"><a href="#定时任务调度" class="headerlink" title="定时任务调度"></a>定时任务调度</h3><p><strong>crond任务调度</strong><br>crontab进行定时任务的设置<br>概述<br>任务调度：是指系统在某个时间执行的特定的命令或程序。<br>任务调度分类：1系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等<br>个别用户工作：个别用户可能希望执行某些程序，比如对mysql数据库的备份。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">crontab [选项]</span><br></pre></td></tr></table></figure>

<p>常用选项</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td>编辑crontab定时任务</td>
</tr>
<tr>
<td>-l</td>
<td>查询crontab任务</td>
</tr>
<tr>
<td>-r</td>
<td>删除当前用户所有的crontab任务</td>
</tr>
</tbody></table>
<p>快速入门</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">设置任务调度文件：/etc/crontab</span><br><span class="line">设置个人任务调度。执行crontab -e命令。</span><br><span class="line">接着输入任务到调度文件</span><br><span class="line">如：*/1****<span class="built_in">ls</span> -l /etc/ &gt; /tmp/to.txt</span><br><span class="line">意思说每小时的每分钟执行<span class="built_in">ls</span> -l/etc/ &gt; /tmp/to.txt命令</span><br></pre></td></tr></table></figure>

<p>参数细节说明<br>5个占位符的说明</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>含义</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>第一个“*”</td>
<td>一小时当中的第几分钟</td>
<td>0-59</td>
</tr>
<tr>
<td>第二个“*”</td>
<td>一天当中的第几小时</td>
<td>0-23</td>
</tr>
<tr>
<td>第三个“*”</td>
<td>一个月当中的第几天</td>
<td>1-31</td>
</tr>
<tr>
<td>第四个“*”</td>
<td>一年当中的第几月</td>
<td>1-12</td>
</tr>
<tr>
<td>第五个“*”</td>
<td>一周当中的星期几</td>
<td>0-7（0和7都代表星期天）</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>代表任何时间。比如第一个“*” 就代表一小时中每分钟都执行一次的意思。</td>
</tr>
<tr>
<td>，</td>
<td>代表不连续的时间。比如“0 8,12,16 * * *命令”，就代表在每天的8点0分，12点0分，16点0分都执行一次命令</td>
</tr>
<tr>
<td>-</td>
<td>代表连续的时间范围。比如“0 5 * * 1-6命令”，代表在周一到周六的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>*&#x2F;n</td>
<td>代表每隔多久执行一次。比如“*&#x2F;10 * * * *命令”，代表每隔10分钟就执行一遍命令</td>
</tr>
</tbody></table>
<p>特定时间执行任务案例</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>45 22 * * * 命令</td>
<td>在22点45分执行命令</td>
</tr>
<tr>
<td>0 17 * * 1 命令</td>
<td>每周1的17点0分执行命令</td>
</tr>
<tr>
<td>0 5 1,15 * * 命令</td>
<td>每月1号和15号的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>40 4 * * 1-5 命令</td>
<td>每周一到周五的凌晨4点40分执行命令</td>
</tr>
<tr>
<td>*&#x2F;10 4 * * * 命令</td>
<td>每天的凌晨4点，每隔10分钟执行一次命令</td>
</tr>
<tr>
<td>0 0 1,15 * 1 命令</td>
<td>每月1号和15号，每周1的0点0分都会执行命令。</td>
</tr>
</tbody></table>
<p><strong>注意</strong>：星期几和几号不要同时出现，因为他们定义的都是天。非常容易让管理员混乱。</p>
<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">案例1：每隔1分钟，就将当前的日期信息，追加到/tmp/mydate文件中</span><br><span class="line">*/1 * * * * <span class="built_in">date</span> &gt;&gt; /tmp/mydate</span><br><span class="line">案例2：每隔1分钟，将当前日期和日历都追加到/home/mycal文件中</span><br><span class="line"><span class="comment"># 进入到/home目录</span></span><br><span class="line"><span class="built_in">cd</span> /home</span><br><span class="line"><span class="comment"># 创建shell脚本</span></span><br><span class="line">vim my.sh</span><br><span class="line"><span class="comment"># 按i编辑，输入以下指令，然后esc :wq[enter]保存退出</span></span><br><span class="line"><span class="built_in">date</span> &gt;&gt; /home/mycal</span><br><span class="line">cal &gt;&gt; /home/mycal</span><br><span class="line"><span class="comment"># 给文件提权</span></span><br><span class="line"><span class="built_in">chmod</span> u+x my.sh</span><br><span class="line"><span class="comment"># 定时调用</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="comment"># 输入以下内容</span></span><br><span class="line">*/1 * * * * /home/my.sh</span><br><span class="line">案例3：每天凌晨2：00将mysql数据库testdb,备份到文件中。提示：指令为</span><br><span class="line">mysqldump -u root -p密码 数据库 &gt; /home/db.bak</span><br><span class="line"><span class="comment"># 定时调用</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="comment"># 追加如下内容</span></span><br><span class="line">0 2 * * * mysqldump -u root -proot testdb &gt; /home/db.bak</span><br></pre></td></tr></table></figure>

<p>crond相关指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -r:终止任务调度。</span><br><span class="line">crontab -l:列出当前有那些任务调度</span><br><span class="line">service crond restart [重启任务调度]</span><br></pre></td></tr></table></figure>

<p><strong>at定时任务</strong><br>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.at命令是一次性定时计划任务，at的守护进程atd会以后台模式运行，检查作业队列来运行。</span><br><span class="line">2.默认情况下，atd守护进程每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。</span><br><span class="line">3.at命令是一次性定时计划任务，执行完一个任务后不再执行此任务了</span><br><span class="line">4.在使用at命令的时候，一定要保证atd进程的启动，可以使用相关指令来查看</span><br><span class="line">ps -ef | grep atd (可以监测atd是否在运行)</span><br></pre></td></tr></table></figure>

<p>at命令格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">at [选项] [时间]</span><br><span class="line">Ctrl+D 结束at命令的输入</span><br></pre></td></tr></table></figure>

<p>at命令选项</p>
<table>
<thead>
<tr>
<th>选型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>-m</td>
<td>当指定的任务被完成后，将给用户发送邮件，即使没有标准输出</td>
</tr>
<tr>
<td>-I</td>
<td>atq的别名</td>
</tr>
<tr>
<td>-d</td>
<td>atrm的别名</td>
</tr>
<tr>
<td>-v</td>
<td>显示认识将被执行的时间</td>
</tr>
<tr>
<td>-c</td>
<td>打印任务的内容到标准输出</td>
</tr>
<tr>
<td>-V</td>
<td>显示版本信息</td>
</tr>
<tr>
<td>-q&lt;队列&gt;</td>
<td>使用指定的队列</td>
</tr>
<tr>
<td>-f&lt;文件&gt;</td>
<td>从指定文件读入任务而不是从标准输入读入</td>
</tr>
<tr>
<td>-t&lt;时间参数&gt;</td>
<td>以时间参数的形式提交要运行的任务</td>
</tr>
</tbody></table>
<p>at时间定义<br>at指定时间的方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.接受在当天的hh:mm(小时：分钟)式的时间指定。假如该时间已过去，那么就放在第二天执行。例如：</span><br><span class="line">04:00</span><br><span class="line">2.使用midnight(深夜)，noon(中午)，teatime(饮茶时间，一般是下午4点)等比较模糊的词语来指</span><br><span class="line">、定时间。</span><br><span class="line">3.采用12小时计时制，即在时间后面加上AM(上午)或PM(下午)来说明是上午还是下午。例如：12pm</span><br><span class="line">4.指定命令执行的具体日期，指定格式为month day(月日)或mm/dd/yy(月/日/年)或dd.mm.yy</span><br><span class="line">(日.月.年)，指定的日期必须跟在指定时间的后面。例如：04:00 2021-03-1</span><br><span class="line">5.使用相对计时法。指定格式为：noW + count time-units,now就是当前时间，time-units是时间单位，这里能够是minutes(分钟)、hours(小时)、days(天)、weeks(星期)。count是时间的数量，</span><br><span class="line">几天，几小时。例如：now + 5 minutes</span><br><span class="line">6.直接使用today(今天)、tomorrow(明天)来指定完成命令的时间。</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">案例1：2天后的下午5点执行/bin/ls /home</span><br><span class="line"><span class="comment"># 输入如下指令</span></span><br><span class="line">at 5pm + 2 days</span><br><span class="line">at&gt; /bin/ls /home</span><br><span class="line"><span class="comment"># 按两次ctrl+d退出</span></span><br><span class="line">案例2：atq命令来查看系统中没有执行的工作任务</span><br><span class="line">atq</span><br><span class="line">案例3：明天17点钟，输出时间到指定文件内比如/root/date100.<span class="built_in">log</span></span><br><span class="line"><span class="comment"># 输入如下指令</span></span><br><span class="line">at 5pm tomorrow</span><br><span class="line">at&gt; <span class="built_in">date</span> &gt; /root/date100.<span class="built_in">log</span></span><br><span class="line"><span class="comment"># 按两次ctrl+d退出</span></span><br><span class="line">案例4：2分钟后，输出时间到指定文件内比如/root/date200.<span class="built_in">log</span></span><br><span class="line"><span class="comment"># 输入如下指令</span></span><br><span class="line">at now + 2 minutes</span><br><span class="line">at&gt; <span class="built_in">date</span> &gt; /root/date200.<span class="built_in">log</span></span><br><span class="line"><span class="comment"># 按两次ctrl+d退出</span></span><br><span class="line">案例5：删除已经设置的任务，atrm编号</span><br><span class="line">atrm 5</span><br><span class="line">atrm 6</span><br></pre></td></tr></table></figure>

<h3 id="磁盘分区、挂载"><a href="#磁盘分区、挂载" class="headerlink" title="磁盘分区、挂载"></a>磁盘分区、挂载</h3><p><strong>Linux分区</strong><br>●原理介绍<br>1.Linux来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的<br>文件结构，Linux中每个分区都是用来组成整个文件系统的一部分。<br>2.Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。<br>3.示意图</p>
<p><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/image-20240919104813066_20240927141029252858.png" alt="image-20240919104813066" title="Linux磁盘分区"></p>
<p>●查看所有设备挂载情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令：lsblk 或者 lsblk -f</span><br></pre></td></tr></table></figure>

<p>●硬盘说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘</span><br><span class="line">2.对于IDE硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指IDE硬盘</span><br><span class="line">了。“x”为盘号(a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘)，“~”代表分区，</span><br><span class="line">前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为</span><br><span class="line">第一个IDE硬盘上的第三个主分区或扩展分区，hdb2表示为第二个IDE硬盘上的第二个主分区或扩展</span><br><span class="line">分区。</span><br><span class="line">3.对于SCS硬盘则标识为“sdx~”,SCSI硬盘是用“<span class="string">&quot;sd”来表示分区所在设备的类型的，其余则和</span></span><br><span class="line"><span class="string">IDE硬盘的表示方法一样。</span></span><br></pre></td></tr></table></figure>

<p><strong>挂载的经典案例</strong><br>●说明：下面我们以增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。<br>●如何增加一块硬盘</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">1.虚拟机添加硬盘</span><br><span class="line">在【虚拟机】菜单中，选择【设置】,然后设备列表里添加硬盘，然后一路【下一步】，中间只有选择磁盘大小的地方需要修改，至到完成。然后重启系统（才能识别）！</span><br><span class="line">2.分区</span><br><span class="line">分区命令 fdisk /dey/sdb</span><br><span class="line">开始对/sdb分区</span><br><span class="line">m 显示命令列表</span><br><span class="line">p 显示磁盘分区同 fdisk -l</span><br><span class="line">n 新增分区</span><br><span class="line">d 删除分区</span><br><span class="line">w 写入并退出</span><br><span class="line">说明：开始分区后输入n,新增分区，然后选择p，分区类型为主分区。两次回车默认剩余全部空间。最</span><br><span class="line">后输入W写入分区并退出，若不保存退出输入q。</span><br><span class="line">3.格式化</span><br><span class="line">格式化磁盘</span><br><span class="line">分区命令：mkfs -t ext4 /dev/sdb1</span><br><span class="line">其中ext4是分区类型</span><br><span class="line">4.挂载</span><br><span class="line">挂载：将一个分区与一个目录联系起来</span><br><span class="line">mount 设备名称 挂载目录</span><br><span class="line">例如：mount /dev/sdb1 /newdisk</span><br><span class="line">卸载：将分区和目录分开</span><br><span class="line">umount 设备名称 或者 挂载目录</span><br><span class="line">例如：umount /dev/sdb1 或者 umount /newdisk</span><br><span class="line">注意：用命令行挂载重启后会失效</span><br><span class="line">5.设置可以自动挂载</span><br><span class="line">永久挂载：通过修改/etc/fstab实现挂载</span><br><span class="line"><span class="comment"># 编辑/etc/fstab文件</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line"><span class="comment"># 输入如下内容</span></span><br><span class="line">/dev/sdb1                        /newdisk              ext4    defaults   0 0</span><br><span class="line">添加完成后 执行mount -a 即刻生效</span><br></pre></td></tr></table></figure>

<p><strong>磁盘情况查询</strong><br>●查询系统整体磁盘使用情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>

<p>●应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查询系统整体磁盘使用情况</span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>

<p>●查询指定目录的磁盘占用情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="built_in">du</span> -h /目录</span><br><span class="line">查询指定目录的磁盘占用情况，默认为当前目录</span><br><span class="line">-s 指定目录占用大小汇总</span><br><span class="line">-h 带计量单位</span><br><span class="line">-a 含文件</span><br><span class="line">--max-depth=1 子目录深度</span><br><span class="line">-c 列出明细的同时，增加汇总值</span><br></pre></td></tr></table></figure>

<p>●应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询/opt目录的磁盘占用情况，深度为1</span><br><span class="line"><span class="built_in">du</span> -h --max-depth=1 /opt</span><br><span class="line"><span class="built_in">du</span> -ha --max-depth=1 /opt</span><br><span class="line"><span class="built_in">du</span> -hac --max-depth=1 /opt</span><br></pre></td></tr></table></figure>

<p>●工作实用指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.统计/opt文件夹下文件的个数</span><br><span class="line"><span class="built_in">ls</span> -l /opt | grep <span class="string">&quot;^-&quot;</span> | <span class="built_in">wc</span> -l</span><br><span class="line">2.统计/opt文件夹下目录的个数</span><br><span class="line"><span class="built_in">ls</span> -l /opt | grep <span class="string">&quot;^d&quot;</span> | <span class="built_in">wc</span> -l</span><br><span class="line">3.统计/opt文件夹下文件的个数，包括子文件夹里的</span><br><span class="line"><span class="built_in">ls</span> -lR /opt | grep <span class="string">&quot;^-&quot;</span> | <span class="built_in">wc</span> -l</span><br><span class="line">4.统计/opt文件夹下目录的个数，包括子文件夹里的</span><br><span class="line"><span class="built_in">ls</span> -lR /opt | grep <span class="string">&quot;^d&quot;</span> | <span class="built_in">wc</span> -l</span><br><span class="line">5.以树状显示目录结构[如果没有tree，使用yum install tree安装]</span><br><span class="line">tree /home</span><br></pre></td></tr></table></figure>

<h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><p><strong>NAT网络配置</strong></p>
<p>原理图</p>
<p><img src="https://learning-logs-1253130399.cos.ap-guangzhou.myqcloud.com/editor/image-20240919114713256_20240927141054055783.png" alt="image-20240919114713256" title="NAT网络配置"></p>
<p>查看虚拟网络编辑器和修改IP地址</p>
<p>查看网络IP和网关</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Windows：ipconfig</span><br><span class="line">linux：ip a 或者 ifconfig</span><br></pre></td></tr></table></figure>

<p><strong>ping测试主机，之间网络连通性</strong><br>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 目的主机（功能描述：测试当前服务器是否可以连接目的主机)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试当前服务器是否可以连接百度</span></span><br><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure>

<p><strong>linux网络环境配置</strong></p>
<p>第一种方法（自动获取）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">说明：登陆后，通过界面的来设置自动获取ip,特点：linux启动后会自动获取IP,缺点是每次自动获取的ip地址可能不一样。</span><br></pre></td></tr></table></figure>

<p>第二种方法（指定ip)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">√说明</span><br><span class="line">直接修改配置文件来指定iP,并可以连接到外网（程序员推荐）</span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">要求：将ip地址配置的静态的，比如：ip地址为192.168.200.130</span><br><span class="line"></span><br><span class="line"><span class="comment"># ifcfg-ens33文件说明</span></span><br><span class="line">DEVICE=etho                               <span class="comment">#接口名（设备网卡）</span></span><br><span class="line">HWADDR=00:0C:2X:6x:OXXx                   <span class="comment">#MAC地址</span></span><br><span class="line">TYPE=Ethernet                             <span class="comment">#网络类型（通常是Ethemet)</span></span><br><span class="line">UUID=926a57ba-92c6-4231-bacb-f27e5e6a9f44 <span class="comment">#id</span></span><br><span class="line"><span class="comment">#系统启动的时候网络接口是否有效(yes/no)</span></span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line"><span class="comment">#IP的配置方法[none|static|bootp|dhcp](引导时不使用协议|静态分配IP|BOOTP协议|DHCP协议)</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line"><span class="comment"># IP地址</span></span><br><span class="line">IPADDR=192.168.200.130</span><br><span class="line"><span class="comment"># 网关</span></span><br><span class="line">GATEWAY=192.168.200.2</span><br><span class="line"><span class="comment"># 域名解析器</span></span><br><span class="line">DN51=192.168.200,2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启网络服务或者重启系统生效</span></span><br><span class="line">service network restart</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p><strong>设置主机名和hosts映射</strong><br>设置主机名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.为了方便记忆，可以给linux系统设置主机名，也可以根据需要修改主机名</span><br><span class="line">2.指令 hostname 查看主机名</span><br><span class="line">3.修改文件在/etc/hostname指定</span><br><span class="line">4.修改后，重启生效</span><br></pre></td></tr></table></figure>

<p>设置hosts映射</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">思考：如何通过主机名能够找到（比如ping)某个linux系统？</span><br><span class="line">windows</span><br><span class="line">在C:\Windows\System32\drivers\etc\hosts文件指定即可</span><br><span class="line">案例：192.168.200.130 hspedu100</span><br><span class="line"></span><br><span class="line">linux</span><br><span class="line">在/etc/hosts文件指定</span><br><span class="line">案例：192.168.200.1 ThinkPad-PC</span><br></pre></td></tr></table></figure>

<p><strong>主机名解析过程分析(Hosts、DNS)</strong><br>Hosts是什么</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个文本文件，用来记录IP和Hostname(主机名)的映射关系</span><br></pre></td></tr></table></figure>

<p>DNS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.DNS,就是Domain Name System的缩写，翻译过来就是域名系统</span><br><span class="line">2.是互联网上作为域名和P地址相互映射的一个分布式数据库</span><br></pre></td></tr></table></figure>

<p>应用实例：用户在浏览器输入了<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.浏览器先检查浏览器缓存中有没有该域名解析IP地址，有就先调用这个IP完成解析；如果没有，就检查操作系统DNS解析器缓存，如果有直接返回IP完成解析。这两个缓存，可以理解为本地解析器缓存</span><br><span class="line">2.一般来说，当电脑第一次成功访问某一网站后，在一定时间内，浏览器或操作系统会缓存他的IP地(DNS解析记录)如在 cmd窗口 中输入</span><br><span class="line">ipconfig /displaydns  <span class="comment"># DNS域名解析缓存</span></span><br><span class="line">ipconfig /flushdns    <span class="comment"># 手动清理dns缓存</span></span><br><span class="line">3.如果本地解析器缓存没有找到对应映射，检查系统中hosts文件中有没有配置对应的域名IP映射，如果有，则完成解析并返回。</span><br><span class="line">4.如果本地DNS解析器缓存和hosts文件中均没有找到对应的IP则到域名服务DNS进行解析域</span><br></pre></td></tr></table></figure>

<h3 id="进程管理（重点）"><a href="#进程管理（重点）" class="headerlink" title="进程管理（重点）"></a>进程管理（重点）</h3><p>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.在LINUX中，每个 执行的程序 都称为一个进程。每一个进程都分配一个ID号(pid,进程号)。</span><br><span class="line">2.每个进程都可能以两种方式存在的。前台与后台，所谓前台进程就是用户目前的屏幕上可以进行操作</span><br><span class="line">的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。</span><br><span class="line">3.一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才才结束。</span><br></pre></td></tr></table></figure>

<p><strong>显示系统执行的进程</strong></p>
<p>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps命令是用来查看目前系统中，有哪些正在执行，以及它们执行的状况。可以不加任何参数.</span><br></pre></td></tr></table></figure>

<p>ps -aux显示的信息选项：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>USER</td>
<td>进程执行用户</td>
</tr>
<tr>
<td>PID</td>
<td>进程识别号</td>
</tr>
<tr>
<td>%CPU</td>
<td>占用CPU的百分比</td>
</tr>
<tr>
<td>%MEM</td>
<td>占用物理内存的百分比</td>
</tr>
<tr>
<td>VSZ</td>
<td>占用虚拟内存的大小（单位KB）</td>
</tr>
<tr>
<td>RSS</td>
<td>占用物理内存的大小（单位KB）</td>
</tr>
<tr>
<td>TTY</td>
<td>终端机号</td>
</tr>
<tr>
<td>STAT</td>
<td>运行状态，s表示sleep休眠</td>
</tr>
<tr>
<td>START</td>
<td>进程的开始时间</td>
</tr>
<tr>
<td>TIME</td>
<td>此进程所消CPU时间</td>
</tr>
<tr>
<td>CMD</td>
<td>正在执行的命令或执行该进程的指令</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示当前终端的所有进程信息</span></span><br><span class="line">ps -a</span><br><span class="line"><span class="comment"># 以用户的格式显示进程信息</span></span><br><span class="line">ps -u</span><br><span class="line"><span class="comment"># 显示后台进程运行的参数</span></span><br><span class="line">ps -x</span><br><span class="line"><span class="comment"># 三合一</span></span><br><span class="line">ps -aux</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 要求：以全格式显示当前所有的进程，查看进程的父进程。查看sshd的父进程信息</span></span><br><span class="line">ps -ef是以全格式显示当前所有的进程</span><br><span class="line">[-e显示所有进程。-f全格式。]</span><br><span class="line">ps -ef | grep sshd</span><br><span class="line">/*</span><br><span class="line">是BSD风格</span><br><span class="line">UID:用户ID</span><br><span class="line">PID:进程ID</span><br><span class="line">PPID:父进程D</span><br><span class="line">C:CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；</span><br><span class="line">数值越小，表明进程是I/O密集型运算，执行优先级会提高</span><br><span class="line">STIME:进程启动的时间</span><br><span class="line">TTY:完整的终端名称</span><br><span class="line">TΠME:CPU时间</span><br><span class="line">CMD:启动进程所用的命令和参数</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p><strong>终止进程kill和killall</strong><br>●介绍：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">若是某个进程执行一半需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程。使用<span class="built_in">kill</span>命令来完成此项任务。</span><br></pre></td></tr></table></figure>

<p>●基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> [选项] 进程号（功能描述：通过进程号杀死进程）</span><br><span class="line">killall 进程名称（功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢</span><br><span class="line">时很有用)</span><br></pre></td></tr></table></figure>

<p>●常用选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-9:表示强迫进程立即停止</span><br></pre></td></tr></table></figure>

<p>●最佳实践</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">案例1：踢掉某个非法登绿用户</span><br><span class="line"><span class="built_in">kill</span> 进程号</span><br><span class="line">案例2：终止远程登录服务sshd,在适当时候再次重启sshd服务</span><br><span class="line"><span class="comment"># 查看sshd的ID</span></span><br><span class="line">ps -aux | grep sshd</span><br><span class="line"><span class="comment"># 杀死sshd进程，我这里的id是911</span></span><br><span class="line"><span class="built_in">kill</span> 911</span><br><span class="line">案例3：终止多个gedit</span><br><span class="line"><span class="built_in">kill</span> gedit</span><br><span class="line">案例4：强制杀掉一个终端</span><br><span class="line"><span class="comment"># 查看bash的ID号</span></span><br><span class="line">ps -aux | grep bash</span><br><span class="line"><span class="comment"># 根据id结束进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 1088</span><br></pre></td></tr></table></figure>

<p><strong>查看进程树ostree</strong><br>●基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree [选项]，可以更加直观的来看进程信息</span><br></pre></td></tr></table></figure>

<p>●常用选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-P:显示进程的PID</span><br><span class="line">-u:显示进程的所属用户</span><br></pre></td></tr></table></figure>

<p>●应用实例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例1：请你树状的形式显示进程的pid</span><br><span class="line">ps -p</span><br><span class="line">案例2：请你树状的形式进程的用户<span class="built_in">id</span></span><br><span class="line">ps -u</span><br></pre></td></tr></table></figure>

<p><strong>服务(service)管理</strong><br>●介绍：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">服务(svc本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的情求，比</span><br><span class="line">如(mysql,sshd防火墙等，因此我们又称为守护进程，是Linux中非常重要的知识点。【原理图】</span><br></pre></td></tr></table></figure>

<p>●service管理指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.service 服务名[start|stop|restart|reload|status]</span><br><span class="line">2.在CentoS7.0后很多服务不再使用service,而是systemctl(后面专门讲)</span><br><span class="line">3.service指令管理的服务在/etc/init.d查看</span><br></pre></td></tr></table></figure>

<p>●service管理指令案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请使用service指令，查看，关闭，启动network[注意：在虚拟系统演示，因为网络连接会关闭]</span><br></pre></td></tr></table></figure>

<p>●查看服务名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方式1：使用setup-&gt;系统服务就可以看到全部。</span><br><span class="line">setup [记录，2024/9/20，不得行了，没必要]</span><br><span class="line">方式2：/etc/init.d看到service指令管理的服务</span><br><span class="line"><span class="built_in">ls</span> -l /etc/init.d/</span><br></pre></td></tr></table></figure>

<p>●服务的运行级别(runlevel):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Linux系统有7种运行级别(runlevel):常用的是级别3和5</span><br><span class="line">运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</span><br><span class="line">运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆</span><br><span class="line">运行级别2：多用户状态（没有NFS),不支持网络</span><br><span class="line">运行级别3：完全的多用户状态（有NFS),登陆后进入控制台命令行模式</span><br><span class="line">运行级别4：系统未使用，保留</span><br><span class="line">运行级别5：X11控制台，登陆后进入图形GUI模式</span><br><span class="line">运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</span><br></pre></td></tr></table></figure>

<p>开机的流程说明：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">开机</span><br><span class="line">BIOS</span><br><span class="line">/boot</span><br><span class="line">systemd进程1</span><br><span class="line">运行级别</span><br><span class="line">运行级对应的服务</span><br></pre></td></tr></table></figure>

<p><strong>chkconfig指令</strong></p>
<p>介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.通过chkconfig命令可以给服务的各个运行级别设置自启动/关闭</span><br><span class="line">2.chkconfig指令管理的服务在/etc/init.d查看</span><br><span class="line">3.注意：Centos7.0后，很多服务使用systemctl管理（后面马上讲）</span><br></pre></td></tr></table></figure>

<p>chkconfig基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查看服务chkconfig -list [| grep xxx]</span><br><span class="line">chkconfig 服务名 --list</span><br><span class="line">chkconfig -level 5 服务名 on/off</span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对network服务 进行各种操作，把network在3运行级别，关闭自启动</span></span><br><span class="line">chkconfig --level 3 network off</span><br><span class="line">chkconfig --level 3 network on</span><br></pre></td></tr></table></figure>

<p>使用细节：chkconfig重新设置服务后自启动或关闭，需要重启机器reboot</p>
<p><strong>systemctl管理指令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.基本语法：systemctl [start|stop|restart|status] 服务名</span><br><span class="line">2.systemctl指令管理的服务在/usr/lib/systemd/system查看</span><br></pre></td></tr></table></figure>

<p>●systemctl设置服务的自启动状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.systemctl list-unit-files[| grep服务名]（查看服务开机启动状态，grep可以进行过滤）</span><br><span class="line">2.systemctl <span class="built_in">enable</span> 服务名（设置服务开机启动）</span><br><span class="line">3.systemctl <span class="built_in">disable</span> 服务名（关闭服务开机启动）</span><br><span class="line">4.systemctl is-enabled 服务名（查询某个服务是否是自启动的）</span><br></pre></td></tr></table></figure>

<p>●应用案例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前防火墙的状况，关闭防火墙和重启防火墙。</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure>

<p>●细节讨论：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.关闭或者启用防火墙后，立即生效。[telnet测试某个端口即可]</span><br><span class="line">2.这种方式只是临时生效，当重启系统后，还是回归以前对服务的设置。</span><br><span class="line">3.如果希望设置某个服务自启动或关闭永久生效，要使用systemctl[<span class="built_in">enable</span>|<span class="built_in">disable</span>]服务名.[演标]</span><br></pre></td></tr></table></figure>

<p>●打开或者关闭指定端口<br>在真正的生产环境，往往需要将防火墙打开，但问题来了，如果我们把防火墙打开，那么外部情求数据包就不能跟服务器监听端口通讯。这时，需要打开指定的端口。比如80、22、8080等，这个又怎么做呢？老韩给给大家讲一讲。[示意图]<br><strong>firewall指令</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">打开端口：firewall-cmd --permanent --add-port=端口号/协议</span><br><span class="line">关闭端口：firewall-cmd --permanent --remove-port=端口号/协议</span><br><span class="line">重新截入，才能生效：firewall-cmd --reload</span><br><span class="line">查询端口是否开放：firewall-cmd --query-port=端口/协议</span><br></pre></td></tr></table></figure>

<p>●应用案例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.启用防火墙，测试111端口是否能telnet</span><br><span class="line">systemctl start firewalld</span><br><span class="line">2.开放111端口</span><br><span class="line"><span class="comment"># 打开111端口</span></span><br><span class="line">firewall-cmd --permanent --add-port=111/tcp</span><br><span class="line"><span class="comment"># 重新加载防火墙</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line">3.再次关闭111端口</span><br><span class="line"><span class="comment"># 关闭111端口</span></span><br><span class="line">firewall-cmd --permanent --remove-port=111/tcp</span><br><span class="line"><span class="comment"># 重新加载防火墙</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p><strong>动态监控进程</strong></p>
<p>●介绍：<br>top与ps命令很相似。它们都用来显示正在执行的进程。Top与ps最大的不同之处，在于top在执行一段时间可以更新正在运行的的进程。<br>●基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br></pre></td></tr></table></figure>

<p>●选项说明：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-d秒数</td>
<td>指定top命令每隔几秒更新。默认是3秒</td>
</tr>
<tr>
<td>-i</td>
<td>使top不显示任何闲置或者僵死进程</td>
</tr>
<tr>
<td>-p</td>
<td>通过制定监控进程ID来仅仅监控某个进程的状态</td>
</tr>
</tbody></table>
<p>●交互操作说明：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>P</td>
<td>以CPU使用率排序，默认就是此项</td>
</tr>
<tr>
<td>M</td>
<td>以内存的使用率排序</td>
</tr>
<tr>
<td>N</td>
<td>以PID排序</td>
</tr>
<tr>
<td>q</td>
<td>退出top</td>
</tr>
</tbody></table>
<p>●应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例1.监视特定用户</span><br><span class="line">top:输入此命令，按回车键，查看执行的进程。</span><br><span class="line">u:然后输入“u”回车，再输入用户名，即可</span><br><span class="line">案例2：终止指定的进程。</span><br><span class="line">top:输入此命令，按回车键，查看执行的进程。</span><br><span class="line">k:然后输入“k”回车，再输入要结束的进程ID号</span><br><span class="line">案例3：指定系统状态更新的时间（每隔10秒自动更新）</span><br><span class="line">top -d 10</span><br></pre></td></tr></table></figure>

<p><strong>监控网络状态</strong><br>●查看系统网络情况netstat（可能会有木马监听）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">√基本语法</span><br><span class="line">netstat [选项]</span><br><span class="line">√选项说明</span><br><span class="line">-an 按一定顺序排列输出</span><br><span class="line">-p 显示哪个进程在调用</span><br></pre></td></tr></table></figure>

<p>●应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 请查看服务名为sshd的服务的信息。</span></span><br><span class="line">netstat -anp | grep sshd</span><br></pre></td></tr></table></figure>

<p>●检测主机连接命令ping:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">是一种网络检测检测工具，它主要是用检测远程主机是否正常，或是两部主机间的网线或网卡故障。</span><br><span class="line">如：ping对方ip地址</span><br></pre></td></tr></table></figure>

<h3 id="RPM和YUM"><a href="#RPM和YUM" class="headerlink" title="RPM和YUM"></a>RPM和YUM</h3><p><strong>rpm包的管理</strong><br>    rpm用于互联网下载包的打包及安装工具，它包含在某些Linux分发版中。它生成具有.RPM扩展名的文件。RPM是RedHat Package Manager(RedHati软件包管理工具)的缩写，类似以vindows的<br>setup.exe,这一文件格式名称虽然打上了RedHat的标志，但理念是通用的。Linux的分发版本都有采用(suse,redhat,centos等等)，可以算是公认的行业标准了。</p>
<p>rpm包的简单查询指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询已安装的rpm列表rpm -qa | grep xx</span><br><span class="line">举例：看看当前系统，是否安装了firefox</span><br><span class="line">rpm -qa | grep firefox</span><br></pre></td></tr></table></figure>

<p>rpm包名基本格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">一个rpm包名：firefox-60.2.2-1.el7.centos.x86_64</span><br><span class="line">名称：firefox</span><br><span class="line">版本号：60.2.2-1</span><br><span class="line">适用操作系统：el7.centos.x8664</span><br><span class="line">表示centos7.x的64位系统</span><br><span class="line">如果是i686、i386表示32位系统，noarch表示通用。</span><br></pre></td></tr></table></figure>

<p>rpm包的其它查询指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rpm-qa:查询所安装的所有rpm软件包</span><br><span class="line">rpm -qa | more</span><br><span class="line">rpm -qa grep X [rpm -qa | grep firefox]</span><br><span class="line">rpm -q 软件包名 [功能描述：查询软件包是否安装]</span><br><span class="line">案例：rpm -q firefox</span><br><span class="line"></span><br><span class="line">rpm -qi 软件包名 [功能描述：查询软件包信息]</span><br><span class="line">案例：rpm -qi firefox</span><br><span class="line"></span><br><span class="line">rpm -ql 软件包名 [功能描述：查询软件包中的文件]</span><br><span class="line">比如：rpm -ql firefox</span><br><span class="line"></span><br><span class="line">rpm -qf 文件全路径名 [功能描述：查询文件所属的软件包]</span><br><span class="line">rpm -qf /etc/passwd</span><br><span class="line">rpm -qf /root/install.log</span><br></pre></td></tr></table></figure>

<p>卸载rpm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">rpm -e RPM包的名称</span><br></pre></td></tr></table></figure>

<p>应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除firefox软件包</span></span><br><span class="line">rpm -e firefox</span><br></pre></td></tr></table></figure>

<p>细节讨论</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.如果其它软件包依赖于您要卸载的软件包，卸载时则会产生错误信息。</span><br><span class="line">如：<span class="variable">$rpm</span> -e foo</span><br><span class="line">removing these packages would <span class="built_in">break</span> dependencies:foo is needed by bar-1.0-1</span><br><span class="line">1.如果我们就是要删除foo这个rpm包，可以增加参数--nodeps,就可以强制删除，但是一般不推荐</span><br><span class="line">这样做，因为依赖于该软件包的程序可能无法运行</span><br><span class="line">如：<span class="variable">$rpm</span>- e --nodeps foo</span><br></pre></td></tr></table></figure>

<p>安装rpm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">rpm -ivh RPM包金路径名称</span><br><span class="line"></span><br><span class="line">√参数说明</span><br><span class="line">i=install安装</span><br><span class="line">v=verbose提示</span><br><span class="line">h=<span class="built_in">hash</span>进度条</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 演示卸载和安装firefox浏览器</span></span><br><span class="line">rpm -e firefox</span><br><span class="line">rpm -ivh firefox...</span><br></pre></td></tr></table></figure>

<p><strong>yum</strong><br>    Yum是一个Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动<br>下载RPM包并且安装，可以<strong>自动处理依赖性关系</strong>，并且一次安装所有依赖的软件包。<br>yum的基本指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询yum服务器是否有需要安装的软件</span><br><span class="line">yum list | grep xx软件列表</span><br><span class="line">安装指定的yum包</span><br><span class="line">yum install xxx [功能描述:下载安装]</span><br></pre></td></tr></table></figure>

<p>yum应用实例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">案例：请使用yum的方式来安装firefox</span><br><span class="line"><span class="comment"># 先用rpm卸载firefox</span></span><br><span class="line">rpm -e firefox</span><br><span class="line"><span class="comment"># 查看yum中是否有firefox</span></span><br><span class="line">yum list | grep firefox</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum install firefox</span><br></pre></td></tr></table></figure>

<h3 id="Linux之大数据定制篇大数据定制篇-Shell编程"><a href="#Linux之大数据定制篇大数据定制篇-Shell编程" class="headerlink" title="Linux之大数据定制篇大数据定制篇-Shell编程"></a>Linux之大数据定制篇大数据定制篇-Shell编程</h3><p><strong>为什么要学习Shell编程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.Linux运维工程师在进行服务器集群管理时，需要编写Shell程序来进行服务器管理。</span><br><span class="line">2.对于JavaEE和Python程序员来说，工作的需要，你的老大会要求你编写一些Shell脚本进行程序或者</span><br><span class="line">是服务器的维护，比如编写一个定时备份数据库的脚本。</span><br><span class="line">3.对于大数据程序员来说，需要编写Shell程序来管理集群。</span><br></pre></td></tr></table></figure>

<p><strong>Shell是什么</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。</span><br></pre></td></tr></table></figure>

<p><strong>Shel脚本的执行方式</strong><br>●脚本格式要求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.脚本以#!/bin/bash开头</span><br><span class="line">2.脚本需要有可执行权限</span><br></pre></td></tr></table></figure>

<p>●编写第一个Shell脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">需求说明：创建一个Shell脚本，输出hello world!</span><br><span class="line"><span class="comment"># 创建/home/shcode</span></span><br><span class="line"><span class="built_in">mkdir</span> /home/shcode</span><br><span class="line"><span class="comment"># 进入到该目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/shcode</span><br><span class="line"><span class="comment"># 编辑一个文件</span></span><br><span class="line">vim hello.sh</span><br><span class="line"><span class="comment"># 老一套了，输入以下内容</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>

<p>●脚本的常用执行方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">方式1（输入脚本的绝对路径或相对路径）</span><br><span class="line">说明：首先要赋予hello.sh脚本的+x权限，再执行脚本</span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> u+x hello.sh</span><br><span class="line"><span class="comment"># 执行脚本</span></span><br><span class="line">./hello.sh 或者 /home/shcode/hello.sh</span><br><span class="line">方式2(sh+脚本)</span><br><span class="line">说明：不用赋予脚本+x权限，直接执行即可。</span><br><span class="line"><span class="comment"># 直接用命令</span></span><br><span class="line">sh hello.sh</span><br></pre></td></tr></table></figure>

<p><strong>Shell的变量</strong><br>●Shell变量介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.Linux Shell中的变量分为，系统变量和用户自定义变量。</span><br><span class="line">2.系统变量：<span class="variable">$HOME</span>、<span class="variable">$PWD</span>、<span class="variable">$SHELL</span>、<span class="variable">$USER</span>等等，比如：<span class="built_in">echo</span> <span class="variable">$HOME</span>等等，</span><br><span class="line">3.显示当前shell中所有变量：<span class="built_in">set</span></span><br></pre></td></tr></table></figure>

<p>●shell变量的定义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">1.定义变量：变量名=值</span><br><span class="line">2.撤销变量：<span class="built_in">unset</span> 变量</span><br><span class="line">3.声明静态变量：<span class="built_in">readonly</span> 变量 [注意：不能<span class="built_in">unset</span>]</span><br></pre></td></tr></table></figure>

<p>●快速入门</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">案例1：定义变量A</span><br><span class="line"><span class="comment"># 定义变量并赋值 [这里不能写成A = 10，不能有空格]</span></span><br><span class="line">A=10</span><br><span class="line"><span class="comment"># 输出变量，输出变量，需要加$</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">案例2：撤销变量A</span><br><span class="line"><span class="built_in">unset</span> A</span><br><span class="line">案例3：声明静态的变量B=2,不能<span class="built_in">unset</span></span><br><span class="line"><span class="built_in">readonly</span> B=2</span><br><span class="line">案例4：可把变量提升为全局环境变量，可供其他shell程序使用[该案例后面讲]</span><br></pre></td></tr></table></figure>

<p>●shell变量的定义<br>定义变量的规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.变量名称可以由字母、数字和下划线组成，但是不能以数字开头。5A=200(×)</span><br><span class="line">2.等号两侧不能有空格</span><br><span class="line">3.变量名称一般习惯为大写，约定俗成</span><br></pre></td></tr></table></figure>

<p>将命令的返回值赋给变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.A=`<span class="built_in">date</span>` 【反引号的作用：运行里面的命令，并把结果返回给变量A】</span><br><span class="line">2.A=$(<span class="built_in">date</span>) 等价于反引号</span><br></pre></td></tr></table></figure>

<p><strong>设置环境变量</strong><br>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.<span class="built_in">export</span> 变量名=变量值（功能描述：将shell变量输出为环境变量/全局变量）</span><br><span class="line">2.<span class="built_in">source</span> 配置文件     (功能描述：让修改后的配置信息立即生数)</span><br><span class="line">3.<span class="built_in">echo</span> $变量名        (功能描述：查询环境变量的值)</span><br></pre></td></tr></table></figure>

<p>快速入门</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.在/etc/profile.文件中定义TOMCAT_HOME环境变量</span><br><span class="line">2.查看环境变量TOMCAT_HOME的值</span><br><span class="line">3.在另外一个shell程序中使用TOMCAT_HOME</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：在输出TOMCAT HOME环境变量前，需要让其生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<p>shell脚本多行注释</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;! </span><br><span class="line">内容 </span><br><span class="line">！</span><br></pre></td></tr></table></figure>

<p>位置参数变量</p>
<p>●介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当我们执行一个shell脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量</span><br><span class="line">比如：./myshell.sh 100 200,这个就是一个执行shell的命令行，可以在myshell脚本中获取到参数</span><br><span class="line">信息</span><br></pre></td></tr></table></figure>

<p>●基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$n</span> (功能描述：n为数字，<span class="variable">$0</span>代表命令本身，<span class="variable">$1</span>-<span class="variable">$9</span>代表第一到第九个参数，十以上的参数，十以上的参数需要用大括号包含，如<span class="variable">$&#123;10&#125;</span>)</span><br><span class="line">$* (功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体)</span><br><span class="line"><span class="variable">$@</span> (功能描述：这个变量也代表命令行中所有的参数，不过<span class="variable">$@</span>把每个参数区分对待)</span><br><span class="line"><span class="variable">$#</span> (功能描述：这个变量代表命令行中所有参数的个数)</span><br></pre></td></tr></table></figure>

<p>位置参数变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">案例：编写一个shell脚本体position.sh,在脚本中获取到命令行的各个参数信息。</span><br><span class="line"><span class="comment"># 进入到shcode目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/shcode</span><br><span class="line"><span class="comment"># 创建position.sh文件</span></span><br><span class="line">vim position.sh</span><br><span class="line"><span class="comment"># 输入一下内容，老一套编辑，退出保存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># $n (功能描述：n为数字，$0代表命令本身，$1-$9代表第一到第九个参数，十以上的参数，十以上的参数需要用大括号包含，如$&#123;10&#125;)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1=<span class="variable">$1</span> 2=<span class="variable">$2</span> 3=<span class="variable">$3</span>&quot;</span></span><br><span class="line"><span class="comment"># $* (功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;所有的参数=$*&quot;</span></span><br><span class="line"><span class="comment"># $@ (功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="comment"># $# (功能描述：这个变量代表命令行中所有参数的个数)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;参数的个数=<span class="variable">$#</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行文件</span></span><br><span class="line">sh position.sh 100 200 300</span><br></pre></td></tr></table></figure>

<p><strong>预定义变量</strong><br>●基本介绍<br>就是shelli设计者事先已经定义好的变量，可以直接在shell脚本中使用<br>●基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$ (功能描述：当前进程的进程号(PID))</span><br><span class="line">$! (功能描述：后台运行的最后一个进程的进程号(PID))</span><br><span class="line">$? (功能描述：最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行：如果这个变量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。)</span><br></pre></td></tr></table></figure>

<p>●应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">在一个shell脚本中简单使用一下预定义变量 preVar.sh</span><br><span class="line"><span class="comment"># 进入到shcode目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/shcode</span><br><span class="line"><span class="comment"># 创建preVar.sh文件</span></span><br><span class="line">vim preVar.sh</span><br><span class="line"><span class="comment"># 输入一下内容，老一套</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前执行的进程ID=$$&quot;</span></span><br><span class="line"><span class="comment"># 以后台的方式运行一个脚本，并获取她的进程号</span></span><br><span class="line">/home/shcode/myshell.sh &amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;最后一个后台方式运行的进程ID=$!&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;执行的结果是=$?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行文件</span></span><br><span class="line">sh preVar.sh	</span><br></pre></td></tr></table></figure>

<p><strong>运算符</strong><br>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.“$(运算式)” 或 “$[运算式]” 或者 <span class="built_in">expr</span> m + n</span><br><span class="line">2.注意<span class="built_in">expr</span>运算符间要有空格,如果希望将<span class="built_in">expr</span>的结果赋值给变量，需要 `` 包起来</span><br><span class="line">3.<span class="built_in">expr</span> m - n</span><br><span class="line">4.<span class="built_in">expr</span> \*,/,% 乘，除，取余</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">案例1：计算(2+3)X4的值，【我直接省略了创建文件的步骤】</span><br><span class="line"><span class="comment"># 方法一,推荐使用</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$[(2+3)*4]&quot;</span></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(((2+3)</span>*4))&quot;</span></span><br><span class="line"><span class="comment"># 方法三</span></span><br><span class="line">TEMP=`<span class="built_in">expr</span> 2 + 3`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;`expr <span class="variable">$TEMP</span> \* 4`&quot;</span></span><br><span class="line">案例2：请求出命令行的两个参数[整数]的和 20 50</span><br><span class="line">A=`<span class="built_in">expr</span> <span class="variable">$1</span> + <span class="variable">$2</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$A</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>条件判断</strong><br>判断语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="keyword">if</span> [ condition ] </span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		代码</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">或者，多分支</span><br><span class="line"><span class="keyword">if</span> [ condition ] </span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		代码</span><br><span class="line"><span class="keyword">elif</span> [ condition ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		代码</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">(注意condition前后要有空格，condition指代要判断的内容)</span><br><span class="line"><span class="comment">#非空返回true,可使用$?验证(0为true,&gt;1为false)</span></span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ hspEdu ]                                返回<span class="literal">true</span> </span><br><span class="line">[]                                        返回<span class="literal">false</span></span><br><span class="line">[ condition ] &amp;&amp; <span class="built_in">echo</span> OK || <span class="built_in">echo</span> notok    条件满足，执行后面的语句</span><br></pre></td></tr></table></figure>

<p>常用判断条件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1) = 字符串比较</span><br><span class="line">2) 两个整数的比较</span><br><span class="line">-lt 小于</span><br><span class="line">-le 小于等于</span><br><span class="line">-eq 等手</span><br><span class="line">-gt 大于</span><br><span class="line">-ge 大于等于</span><br><span class="line">-ne 不等于</span><br><span class="line">3)按照文件权限进行判断</span><br><span class="line">-r 有读的权限</span><br><span class="line">-w 有写的权限</span><br><span class="line">-x 有执行的权限</span><br><span class="line">4)按照文件类型进行判断</span><br><span class="line">-f 文件存在并且是一个常规的文件</span><br><span class="line">-e 文件存在</span><br><span class="line">-d 文件存在并是一个目录</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">案例1：<span class="string">&quot;ok&quot;</span>是否等于<span class="string">&quot;ok&quot;</span></span><br><span class="line">判断语句： 使用 =</span><br><span class="line"><span class="comment"># 跳过创建文件，直接写内容</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;ok&quot;</span> = <span class="string">&quot;ok&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;相等&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">案例2：23是否大于等于22</span><br><span class="line">判断语句： 使用 -ge</span><br><span class="line"><span class="keyword">if</span> [ 23 -ge 22 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;大于等于&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">案例3：/root/shcode/aaa.txt目录中的文件是否存在</span><br><span class="line">判断语句：使用 -f</span><br><span class="line"><span class="keyword">if</span> [ /root/shcode/aaa.txt -f ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><strong>流程控制</strong><br>case语句,基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $变量名 <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;值1&quot;</span>)</span><br><span class="line">如果变量的值等于值1，则执行程序1</span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;值2&quot;</span>)</span><br><span class="line">如果变量的值等于值2，则执行程序2</span><br><span class="line">;;</span><br><span class="line">…省略其他分支…</span><br><span class="line">*)</span><br><span class="line">如果变量的值都不是以上的值，则执行此程序</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p>应用实例testCase.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">案例1：当命令行参数是1时，输出<span class="string">&quot;周一&quot;</span>，是2时，就输出<span class="string">&quot;周二&quot;</span>，其它情况输出<span class="string">&quot;other&quot;</span></span><br><span class="line"><span class="comment"># 省略创建，直接来</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;1&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;周一&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;2&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;周一&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;周一&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行文件</span></span><br><span class="line">sh testCase.sh 1</span><br></pre></td></tr></table></figure>

<p><strong>for循环</strong><br>基本语法1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2 值3…</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>应用实例testFor1.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例1：打印命令行输入的参数[这里可以看出$* 和<span class="variable">$@</span> 的区别]</span><br><span class="line">注意：$*是把输入的参数当作一个整体，<span class="variable">$@</span>是把输入的参数分开来</span><br><span class="line"><span class="comment"># 直接来</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;num is <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>基本语法2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((初始值：循环控制条件：变量变化))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>应用实例testFor2.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">案例1：从1加到100的值输出显示</span><br><span class="line"><span class="comment"># 直接来</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line">SUM=0</span><br><span class="line"><span class="keyword">for</span>(( i=<span class="number">1</span>; i&lt;=<span class="number">100</span>; i++))</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">SUM=$[<span class="variable">$SUM</span> + <span class="variable">$i</span>]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$SUM</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>while循环</strong><br>基本语法1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件判断试 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">程序</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">注意：<span class="keyword">while</span> 和 [有空格，[ 和条件判断式也有空格。</span><br></pre></td></tr></table></figure>

<p>应用实例testWhile.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">案例1：从命令行输入一个数n,统计从1+...+n的值是多少？</span><br><span class="line"><span class="comment"># 直接来</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line">SUM=0</span><br><span class="line">i=0</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">		SUM=$[<span class="variable">$SUM</span>+<span class="variable">$i</span>]</span><br><span class="line">		i=$[<span class="variable">$i</span>+1]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;sum = <span class="variable">$SUM</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>read读取控制台输入</strong><br>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> (选项)（参数）</span><br><span class="line">选项：</span><br><span class="line">-p:指定读取值时的提示符；</span><br><span class="line">-t:指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了。。</span><br><span class="line">参数</span><br><span class="line">变量：指定读取值的变量名</span><br></pre></td></tr></table></figure>

<p>应用实例testRead.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例1：读取控制台输入一个num值</span><br><span class="line"><span class="comment"># 直接来,执行还是老样子，后面通通省略了，开头也不写了，一切从简</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入一个num=&quot;</span> NUM1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$NUM1</span>&quot;</span></span><br><span class="line">案例2：读取控制台输入一个num值，在10秒内输入。</span><br><span class="line"><span class="built_in">read</span> -t 10 -p <span class="string">&quot;请输入一个数NUM2=&quot;</span> NUM2</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$NUM2</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>函数</strong><br>函数介绍<br>shell编程和其它编程语言一样，有系统函数，也可以自定义函数。系统函数中，我们这里就介绍两个。<br>●系统函数</p>
<p>●basename基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">功能：返回完整路径最后/的部分，常用于获取文件名</span><br><span class="line"><span class="built_in">basename</span> [pathname][suffix]</span><br><span class="line"><span class="built_in">basename</span> [string][suffix] (功能描述：<span class="built_in">basename</span>命令会删掉所有的前缀包括最后一个(<span class="string">&#x27;)字符，然后将字符串显示出来。</span></span><br><span class="line"><span class="string">选项：</span></span><br><span class="line"><span class="string">suffix为后缀，如果suffix被指定了，basename会将pathname或string中的suffix去掉，</span></span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例1：请返回/home/aaa/test.txt的<span class="string">&quot;test.txt&quot;</span>部分</span><br><span class="line"><span class="built_in">basename</span> /home/aaa/test.txt</span><br></pre></td></tr></table></figure>

<p>●dirname基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">功能：返回完整路径最后/的前面的部分，常用于返回路径部分</span><br><span class="line"><span class="built_in">dirname</span> 文件绝对路径  (功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）)</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">案例1：请返回/home/aaa/test.txt的/home/aaa</span><br><span class="line"><span class="built_in">dirname</span> /home/aaa/test.txt</span><br></pre></td></tr></table></figure>

<p>●自定义函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">funname</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">Action;</span><br><span class="line">[<span class="built_in">return</span> int;]</span><br><span class="line">&#125;</span><br><span class="line">调用直接写函数名：funname [值]</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">案例1：计算输入两个参数的和(动态获取)，getSum</span><br><span class="line"><span class="comment"># 定义函数 getSum</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">getSum</span></span>()&#123;</span><br><span class="line">SUM=$[<span class="variable">$n1</span>+<span class="variable">$n2</span>]</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;和是=<span class="variable">$SUM</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入两个值</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入一个输n1=&quot;</span> n1</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入第二个输n2=&quot;</span> n2</span><br><span class="line"><span class="comment"># 调用自定义函数</span></span><br><span class="line">getSum <span class="variable">$n1</span> <span class="variable">$n2</span></span><br></pre></td></tr></table></figure>

<p><strong>Shell编程综合案例</strong><br>●需求分析</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">1.每天凌晨2：30备份(使用crond来调度)数据库hspEduDB到/data/backup/db</span><br><span class="line">2.备份开始和备份结束能够给出相应的提示信息</span><br><span class="line">3.备份后的文件要球以备份时间为文件名，并打包成.tar.gz的形式，比如：2021-03-12_230201.tar.gz</span><br><span class="line">4.在备份的同时，检查是否有10天前备份的数据库文件，如果有就将其删除。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接来,先写shell脚本备份数据库，然后用crond来调度</span></span><br><span class="line"><span class="comment"># 备份目录</span></span><br><span class="line">BACKUP=/data/backup/db</span><br><span class="line"><span class="comment"># 获取当前时间</span></span><br><span class="line">TIME=`<span class="built_in">date</span> +%Y-%m-%d_%H%M%S`</span><br><span class="line"><span class="comment"># 数据库的地址</span></span><br><span class="line">HOST=localhost</span><br><span class="line"><span class="comment"># 数据库用户名</span></span><br><span class="line">DB_USER=root</span><br><span class="line"><span class="comment"># 数据库密码</span></span><br><span class="line">DB_PASSWD=123456</span><br><span class="line"><span class="comment"># 备份的数据库名</span></span><br><span class="line">DATABASE=hspedu</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建备份目录，如果不存在，就创建</span></span><br><span class="line">[ ! -d <span class="string">&quot;<span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$&#123;TIME&#125;</span>&quot;</span> ] &amp;&amp; <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$&#123;TIME&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份数据库</span></span><br><span class="line">mysqldump -u<span class="variable">$&#123;DB_USER&#125;</span> -p<span class="variable">$&#123;DB_PASSWD&#125;</span> --host=<span class="variable">$&#123;HOST&#125;</span> -q -R databases <span class="variable">$&#123;DATABASE&#125;</span> | gzip &gt; <span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$&#123;TIME&#125;</span>/<span class="variable">$&#123;TIME&#125;</span>.sql.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将文件处理成 tar.gz</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;BACKUP&#125;</span></span><br><span class="line">tar -zcvf <span class="variable">$TIME</span>.tar.gz <span class="variable">$&#123;TIME&#125;</span></span><br><span class="line"><span class="comment"># 删除对应的备份目录</span></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$&#123;TIME&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除10天前的备份文件</span></span><br><span class="line">find <span class="variable">$&#123;BACKUP&#125;</span> -atime +10 -name <span class="string">&quot;*.tar.gz&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -rf &#123;&#125; \;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份数据库<span class="variable">$&#123;DATABASE&#125;</span>成功~&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间调度</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="comment"># 输入一下内容</span></span><br><span class="line">30 2 * * * /usr/sbin/mysql_db_backup.sh</span><br></pre></td></tr></table></figure>

<h1 id="2021高级篇"><a href="#2021高级篇" class="headerlink" title="2021高级篇"></a>2021高级篇</h1><h3 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h3><p>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.日志文件是重要的系统信息文件，其中记录了许多重要的系统事件，包括用户的登录信息、系统的</span><br><span class="line">启动信息、系统的安全信息、邮件相关信息、各种服务相关信息等。</span><br><span class="line">2.日志对于安全来说也很重要，它记录了系统每天发生的各种事情，通过日志来检查错误发生的原因，或者受到攻击时攻击者留下的痕迹。</span><br><span class="line">3.可以这样理解日志是用来记录重大事件的工具</span><br></pre></td></tr></table></figure>

<p>系统常用的日志</p>
<table>
<thead>
<tr>
<th>日志文件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;var&#x2F;log&#x2F;boot.log</td>
<td>系统启动日志</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;cron</td>
<td>记录与系统定时任务相关的日志</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;cups&#x2F;</td>
<td>记录打印信息的日志</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;dmesg</td>
<td>记录了系统在开机时内核自检的信总。也可以使用dmesg命令直接查看内核自检信息</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;btmp</td>
<td>记录错误登录的日志。这个文件是二进制文件，不能直接用vi查看，而要使用lastb命令查看</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;lasllog</td>
<td>记录系统中所有用户最后一次的登录时间的日志。这个文件也是二进制文件.要使用lastlog命令查看</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;Iog&#x2F;mailog</td>
<td>记录邮件信息的日志</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;message</td>
<td>记录系统重要消息的日志这个日志文件中会记录Linux系统的绝大多数重要信息。如果系统出现问题，首先要检查的应该就是这个日志文件</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;secure</td>
<td>记录验证和授权方面的倍息，只要涉及账户和密码的程序都会记录，比如系统的登录、ssh的登录、su切换用户、sudo授权，甚至添加用户和修改用户密码都会记录在这个日志文件中</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;wtmp</td>
<td>永久记录所有用户的登陆、注销信息，同时记录系统的后动、重启、关机事件。是二进制文件.而要使用st命令查看</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;tun&#x2F;ulmp</td>
<td>记录当前已经登录的用户的信息。这个文件会随着用户的登绿和注销而不断变化，只记录当前登录用户的信息。这个文件不能用Vi查看，而要使用w、who、users等命令查看</td>
</tr>
</tbody></table>
<p>应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用root用户通过xshell6登陆，第一次使用错误的密码，第二次使用正确的密码登录成功</span><br><span class="line">看看在日志文件/var/log/secure里有没有记录相关信息</span><br><span class="line"><span class="built_in">cat</span> /var/log/secure</span><br></pre></td></tr></table></figure>

<p><strong>日志管理服务rsyslogd</strong></p>
<p>CentOS7.6日志服务是rsyslogd,CentoS6.x日志服务是syslogd。rsyslogd功能更强大。<br>rsyslogd的使用、日志文件的格试，和syslogd服务兼容的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rsyslog配置文件</span></span><br><span class="line">more /etc/rsyslog.conf [重点]</span><br><span class="line"><span class="comment"># 查询Linux中的rsyslogd服务是否启动</span></span><br><span class="line">ps -aux | grep <span class="string">&quot;rsyslog&quot;</span> | grep -v <span class="string">&quot;grep&quot;</span></span><br><span class="line"><span class="comment"># 查询rsyslogd服务的自启动状态</span></span><br><span class="line">systemctl list-unit-files | grep rsyslog</span><br></pre></td></tr></table></figure>

<p>配置文件：&#x2F;etc&#x2F;rsyslog.conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">编辑文件时的格式为： *.*    存放日志文件</span><br></pre></td></tr></table></figure>

<p>其中第一个 * 代表日志类型，第二个 * 代表日志级别<br>1.日志类型分为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">auth                                <span class="comment">##pam产生的日志</span></span><br><span class="line">authpriv                            <span class="comment">##ssh、ftp等登录信息的验证信息</span></span><br><span class="line">corn                           		<span class="comment">##时间任务相关</span></span><br><span class="line">kern							    <span class="comment">##内核</span></span><br><span class="line">lpr									<span class="comment">##打印</span></span><br><span class="line">mail								<span class="comment">##邮件</span></span><br><span class="line">mark(syslog)-rsyslog				<span class="comment">##服务内部的信息，时间标识</span></span><br><span class="line">news								<span class="comment">##新间组</span></span><br><span class="line">user								<span class="comment">##用户程序产生的相关信息</span></span><br><span class="line">uucp                         		<span class="comment">##unix to nuix copy 主机之间相关的通信</span></span><br><span class="line"><span class="built_in">local</span> 1-7							<span class="comment">##自定义的日志设备</span></span><br></pre></td></tr></table></figure>

<p>2.日志级别分为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">debug						<span class="comment">##有调试信息的，日志通信最多</span></span><br><span class="line">info						<span class="comment">##一般信息日志，最常用</span></span><br><span class="line">notice						<span class="comment">##最具有重要性的普通条件的信息</span></span><br><span class="line">warning						<span class="comment">##警告级别</span></span><br><span class="line">err							<span class="comment">##错误级别，阻止某个功能或者模块不能正常工作的信息</span></span><br><span class="line">crit						<span class="comment">##严重级别，阻止整个系统或者整个软件不能正常工作的信息</span></span><br><span class="line">alert						<span class="comment">##需要立刻修改的信息</span></span><br><span class="line">emerg						<span class="comment">##内核崩溃等重要信息</span></span><br><span class="line">none						<span class="comment">##什么都不记录</span></span><br><span class="line">注意：从上到下，级别从低到高，记录信息越来越少</span><br></pre></td></tr></table></figure>

<p>由日志服务rsiyslogd记录的日志文件，日志文件的格式包含以下4列：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.事件产生的时间</span><br><span class="line">2.产生事件的服务器的主机名</span><br><span class="line">3.产生事件的服务名或程序名</span><br><span class="line">4.事件的具体信息</span><br></pre></td></tr></table></figure>

<p>日志如何查看实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看一下/var/log/secure日志，这个日志中记录的是用户验证和授权方面的信息来分析如何查看</span><br><span class="line">时间 + 主机 + 服务 + 详细说明</span><br></pre></td></tr></table></figure>

<p>日志管理服务应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在/etc/rsyslog.conf中添加一个日志文件/var/log/hsp.log,当有事件发送时（比如sshd服务相关事件），该文件会接收到信息并保存.给小伙伴演示重启，登录的情况，看看是否有日志保存。</span><br><span class="line"><span class="comment"># 直接开整</span></span><br><span class="line">*.*                           /var/log/zq.log</span><br></pre></td></tr></table></figure>

<p><strong>日志轮替</strong><br>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">日志轮替就是把旧的日志文件移动并改名，同时建立新的空日志文件，当旧日志文件超出保存的范围之后，就会进行删除</span><br><span class="line">/etc/logrotate.conf [全局的日志轮替策略/规则，当然可以单独给某个日志文件指定策略]</span><br><span class="line">说明：也可以把某个日志文件的轮替规则写到/etc/logrotate.d目录，比如boot.log的轮替规则就是写到这里的</span><br></pre></td></tr></table></figure>

<p>日志轮替文件命名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.centos7使用logrotate进行日志轮替管理，要想改变日志轮替文件名字，通过/etc/logrotate.conf配置文件中&quot;dateext&quot;参数：</span><br><span class="line">2.如果配置文件中有&quot;dateext&#x27;”参数，那么日志会用日期来作为日志文件的后缀，例如&quot;secure-20201010&quot;。这样日志文件名不会重叠，也就不需要日志文件的改名，只需要指定保存日志个数，删除多余的日志文件即可。</span><br><span class="line">3.如果配置文件中没有&quot;dateext&quot;参数，日志文件就需要进行改名了。当第一次进行日志轮替时，当前的&quot;secure&quot;日志会自动改名为&quot;secure.1&quot;,然后建&quot;secure&quot;日志，用来保存新的日志。当第二次</span><br><span class="line">进行日志轮替时，&quot;secure.1&quot;会自动改名为&quot;secure.2”,当前的“secure”日志会自动改名为“secure.1”,然后也会新建“secure”日志，用来保存新的日志，以此类推。</span><br></pre></td></tr></table></figure>

<p>logrotate配置文件</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>daily</td>
<td>日志的轮替周期是每天</td>
</tr>
<tr>
<td>weekly</td>
<td>日志的轮替周期是每周</td>
</tr>
<tr>
<td>monthly</td>
<td>日志的轮替周期是每月</td>
</tr>
<tr>
<td>rotate数字</td>
<td>保留的日志文件的个数。0指没有备份</td>
</tr>
<tr>
<td>compress</td>
<td>日志轮替时，旧的日志进行压缩</td>
</tr>
<tr>
<td>create mode owner group</td>
<td>建立新日志，同时指定新日志的权限与所有者和所属组。</td>
</tr>
<tr>
<td>mail address</td>
<td>当日志轮替时，输出内容通过邮件发送到指定的邮件地址。</td>
</tr>
<tr>
<td>missingok</td>
<td>如果日志不存在，则忽略该日志的警告信息</td>
</tr>
<tr>
<td>notifempty</td>
<td>如果日志为空文件，则不进行日志轮替</td>
</tr>
<tr>
<td>minsize大小</td>
<td>日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替，否则就算时间达到也不轮替</td>
</tr>
<tr>
<td>size大小</td>
<td>日志只有大于指定大小才进行日志轮替，而不是按照时间轮替。</td>
</tr>
<tr>
<td>dateext</td>
<td>使用日期作为日志轮替文件的后缀。</td>
</tr>
<tr>
<td>sharedscripts</td>
<td>在此关键字之后的脚本只执行一次。</td>
</tr>
<tr>
<td>prerotate&#x2F;endscript</td>
<td>在日志轮替之前执行脚本命令。</td>
</tr>
<tr>
<td>postrotate&#x2F;endscript</td>
<td>在日志轮替之后执行脚本命令。</td>
</tr>
</tbody></table>
<p>把自己的日志加入日志轮替</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">√第一种方法是直接在/etc/小logrotate.conf配置文件中写入该日志的轮替策略</span><br><span class="line">√第二种方法是在/etc/八ogrotate.d/目录中新建立该日志的轮替文件，在该轮替文件中写入正确的轮替策略，因为该目录中的文件都会被“include”到主配置文件中，所以也可以把日志加入轮替。</span><br><span class="line">√推荐使用第二种方法，因为系统中需要轮替的日志非常多，如果全都直接写入/etc小ogrotate.conf配置文件，那么这个文件的可管理性就会非常差，不利于此文件的维护。</span><br><span class="line">√在/etc/logrotate..d/配置轮替文件一览</span><br></pre></td></tr></table></figure>

<p>应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">看一个案例，在/etc/logrotate.conf进行配置，或者直接在/etc/logrotate.d/下创建文件     hsplog编写如下内容，具体轮替的傚果可以参考/var/log下的boot.log情况.</span><br><span class="line"></span><br><span class="line">/var/log/hsp.log</span><br><span class="line">&#123;</span><br><span class="line">missingok</span><br><span class="line">daily</span><br><span class="line">copytruncate</span><br><span class="line">rotate 7</span><br><span class="line">notifempty</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>日志轮替机制原理</strong><br>日志轮替之所以可以在指定的时间备份日志，是依赖系统定时任务。在&#x2F;etc&#x2F;cron.daily&#x2F;目录，就会发现这个目录中是有logrotate文件（可执行），logrotate通过这个文件依赖定时任务执行的。</p>
<p><strong>查看内存日志</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">journalctl <span class="comment">#可以查看内存日志，这里我们看看常用的指令</span></span><br><span class="line">journalctl <span class="comment">##查看全部</span></span><br><span class="line">journalctl -n 3 <span class="comment">##查看最新3条</span></span><br><span class="line">journalctl --since 19:00 --<span class="keyword">until</span> 19:10:10 <span class="comment">#查看起始时间到结束时间的日志可加日期</span></span><br><span class="line">journalctl -p err <span class="comment">##报错日志</span></span><br><span class="line">journalctl -o verbose <span class="comment">##日志详细内容</span></span><br><span class="line">journalctl_PID=1245 _COMM=sshd <span class="comment">##查看包含这些参数的日志（在详细日志查看）</span></span><br><span class="line">或者journalctl | grep sshd</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：journalctl 查看的是内存日志，重启清空<br>演示案例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用journalctl | grep sshd 来看看用户登录清空，重启系统，再次查询，看看日志有什么变化没有.</span><br></pre></td></tr></table></figure>

<h3 id="定制自己的Linux"><a href="#定制自己的Linux" class="headerlink" title="定制自己的Linux"></a>定制自己的Linux</h3><p>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通过裁剪现有Linux系统(CentOS7.6),创建属于自己的min Linux小系统，可以加深我们对linux的理解。</span><br><span class="line">老韩利用centos7.6,搭建一个小小linux系统，很有趣。</span><br></pre></td></tr></table></figure>

<p>基本原理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">启动流程介绍</span><br><span class="line">制作Linux小系统之前，再了解一下Linux的启动流程：</span><br><span class="line">1、首先Linux要通过自检，检查硬件设备有没有故障</span><br><span class="line">2、如果有多块启动盘的话，需要在BIOS中选择启动磁盘</span><br><span class="line">3、启动MBR中的bootloader引导程序</span><br><span class="line">4、加载内核文件</span><br><span class="line">5、执行所有进程的父进程、老祖宗systemd</span><br><span class="line">6、欢迎界面</span><br><span class="line"></span><br><span class="line">在Linux的启动流程中，加载内核文件时关键文件：</span><br><span class="line">1)kernel,文件：vmlinuz-3.10.0-957.el7.x8664</span><br><span class="line">2)initrd文件：initramfs-3.10.0-957.el7.x86_64.img</span><br></pre></td></tr></table></figure>

<p><strong>制作min linux思路分析</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.在现有的Linux系统(centos7.6)上加一块硬盘/dev/sdb,在硬盘上分两个分区，一个是/boot,一个是/，并将其格式化。需要明确的是，现在加的这个硬盘在现有的Linux系统中是/dev/sdb但是，当我们把东西全部设置好时，要把这个硬盘拔除，放在新系统上，此时，就是/dev/sda</span><br><span class="line">2.在/dev/sdb硬盘上，将其打造成独立的Linux系统，里面的所有文件是需要拷贝进去的</span><br><span class="line">3.作为能独立运行的Liux系统，内核是一定不能少，要把内核文件和initramfs文件也一起拷/dev/sdb上</span><br><span class="line">4.以上步骤完成，我们的自制Linux5就完成，创建一个新的linuxi虚拟机，将其硬盘指向我们创建的硬盘，启动即可</span><br></pre></td></tr></table></figure>

<p><strong>操作步骤</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">1.首先，在现有的linux添加一块大小为20G的硬盘</span><br><span class="line">【在linux上右击】-&gt;【点击设置】-&gt;【点击添加(A)】-&gt;【选择硬盘】-&gt;【下一步】-&gt;【选择推荐的SCSI】-&gt;【下一步】-&gt;【选择创建新虚拟磁盘(V)】-&gt;【下一步】-&gt;【大小20G 选择将虚拟磁盘存储为单个文件(O)】-&gt;【下一步】-&gt;【取名字例如Centos7.6-min.vmdk】-&gt;【完成】-&gt;【确定】</span><br><span class="line"><span class="comment"># 开启虚拟机，使用lsblk查看添加的硬盘</span></span><br><span class="line">lsblk</span><br><span class="line">2.添加完成后，点击确定，然后启动现有的linux(centos7.6)。通过fdisk来给/dev/sdb进行分区</span><br><span class="line"><span class="comment"># 输入命令进行分区</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"><span class="comment"># 看之前的分区教程，进行分区，分两块去，第一块给root 500M，第二块19.5G</span></span><br><span class="line">3.对/dev/sdb的分区进行格式化</span><br><span class="line">mkfs.ext4 /dev/sdb1</span><br><span class="line">mkfs.ext4 /dev/sdb2</span><br><span class="line">4.创建目录，并挂载新的磁盘</span><br><span class="line"><span class="comment"># 创建boot 和 sysroot 两个目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/boot /mnt/sysroot</span><br><span class="line"><span class="comment"># 挂载新的磁盘</span></span><br><span class="line">mount /dev/sdb1 /mnt/boot</span><br><span class="line">mount /dev/sdb2 /mnt/sysroot/</span><br><span class="line">5.安装grub，内核文件拷贝到目标磁盘</span><br><span class="line">gurb2-install --root-directory=/mnt/dev/sdb</span><br><span class="line"><span class="comment"># 看一下二进制确定我们是否安装成功</span></span><br><span class="line">hexdump -C -n 512 /dev/sdb</span><br><span class="line"><span class="built_in">cp</span> -rf /boot/* /mnt/boot</span><br><span class="line">6.修改grub2/grub.cfg文件，标红的部分 是需要使用 指令来查看的</span><br><span class="line"><span class="comment"># 查看分区结果，这里可以看见sda和sdb两个硬盘的UUID</span></span><br><span class="line">lsblk -f</span><br><span class="line"><span class="comment"># 进入到grub2目录</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/boot/grub2</span><br><span class="line"><span class="comment"># 编辑grub.cfg文件</span></span><br><span class="line">vim grub.cfg</span><br><span class="line"><span class="comment"># 修改UUID，把拷贝的sda的UUID替换为sdb的UUID,所有地方都要改完</span></span><br><span class="line">【/mnt/boot】-&gt;【/boot】</span><br><span class="line">【/mnt/sysroot】-&gt;【/】</span><br><span class="line"><span class="comment"># 在linux16...UTF-8和linux16...quiet结尾写上如下内容 [就是不要走系统的线，走自定义的线]</span></span><br><span class="line">selinux=0 init=/bin/bash</span><br><span class="line">7.创建目标主机根文件系统</span><br><span class="line"><span class="comment"># 直接来，同时创建多个目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -pv /mnt/sysroot/&#123;etc/rc.d,usr,var,proc,sys,dev,lib,lib64,bin,sbin,boot,srv,mnt,media,home,root&#125;</span><br><span class="line">8. 拷贝需要的bash（也可以拷贝你需要的指令）和库文件给新的系统使用</span><br><span class="line"><span class="built_in">cp</span> /lib64/*.* /mnt/sysroot/lib64/</span><br><span class="line"><span class="built_in">cp</span> /bin/bsah /mnt/sysroot/bin/</span><br><span class="line">9.现在我们可以创建一个新的虚拟机，然后将默认分配的硬盘移除掉，指向我们刚刚创建的磁盘即可。</span><br><span class="line"><span class="comment"># 先关闭虚拟机,然后创建新的虚拟机</span></span><br><span class="line">【新建虚拟机】-&gt;【选择典型（推荐）（T）】-&gt;【下一步】-&gt;【稍后安装操作系统】-&gt;【下一步】-&gt;【Linux(L)】【随便】-&gt;【下一步】-&gt;【名称min-linux】【位置E:/】-&gt;【下一步】-&gt;【20G】【将虚拟磁盘拆分成多个文件（M）】-&gt;【下一步】-&gt;【自定义硬件】-&gt;【处理器2*2】【移除打印机】-&gt;【关闭】-&gt;【完成】</span><br><span class="line"><span class="comment"># 将硬盘移除，指向我们刚刚创建的磁盘</span></span><br><span class="line">【在linux上右击】-&gt;【点击设置】-&gt;【选择硬盘】-&gt;【点击移除（R）】-&gt;【点击添加(A)】-&gt;【选择硬盘】-&gt;【下一步】-&gt;【选择推荐的SCSI】-&gt;【下一步】-&gt;【选择使用现有的虚拟磁盘（E）】-&gt;【下一步】-&gt;【选择我们之前的Centos7.6-min.vmdk】-&gt;【完成】-&gt;【确定】</span><br><span class="line"><span class="comment"># 开启虚拟机，点击 否</span></span><br><span class="line">10.这时，很多指令都不能使用，比如<span class="built_in">ls</span>，reboot等，可以将需要的指令拷贝到对应的目录即可</span><br><span class="line">11.如果要拷贝指令，重新进入到原来的linux系统拷贝相应的指令即可，例如，将/bin/ls 拷贝到/mnt/sysroot/bin 将/sbin/reboot拷贝到/mnt/sysroot/sbin</span><br><span class="line"><span class="comment"># 将sdb2挂载到sysroot目录</span></span><br><span class="line">mount /dev/sdb2 /mnt/sysroot/</span><br><span class="line"><span class="built_in">cp</span> /bin/ls /mnt/sysroot/bin/</span><br><span class="line"><span class="built_in">cp</span> /bin/systemctl /mnt/sysroot/bin/</span><br><span class="line"><span class="built_in">cp</span> /sbin/reboot /mnt/sysroot/bin/</span><br><span class="line">12. 再重新启动新的linux系统，就哭使用<span class="built_in">ls</span>，reboot指令了</span><br></pre></td></tr></table></figure>

<h3 id="linux内核源码-内核升级"><a href="#linux内核源码-内核升级" class="headerlink" title="linux内核源码&amp;内核升级"></a>linux内核源码&amp;内核升级</h3><p><strong>为什么要阅读linux内核？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">爱好，就是喜欢linux(黑客精神)</span><br><span class="line"></span><br><span class="line">想深入理解Iiux底层运行机制，对操作系统有深入理解</span><br><span class="line"></span><br><span class="line">阅读Liux内核，你会对整个计算机体系有一个更深刻的认识。作为开发者，不管你从事的是驱动开发，应用开发还是后台开发，你都需要了解操作系统内核的运行机制，这样才能写出更好的代码。</span><br><span class="line"></span><br><span class="line">作为开发人员不应该只局限在自己的领域，你设计的模块看起来小，但是你不了解进程的调用机制，你不知道进程为什么会阻塞、就绪、执行几个状态。那么很难写出优质的代码。</span><br><span class="line"></span><br><span class="line">找工作面试的需要</span><br><span class="line"></span><br><span class="line">老韩忠告，作为有追求的程序员，还是应该深入的了解一个操作系统的底层机制，(比如linux/unix)最好是源码级别的，这样你写多线程高并发程序，包括架构，优化，算法等，高度不一样的，当然老韩也不是要求小伙伴儿把一个非常庞大的Linux内核每一行都读懂。我觉得。你至少能看几个核心的模块把。</span><br></pre></td></tr></table></figure>

<p><strong>linux0.01内核源码</strong><br>基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Linux的内核源代码可以从网上下载，解压缩后文件一般地都位于linux目录下。内核源代码有很多版本，可以从linux0.01内核入手，总共的代码1w行左右，最新版本5.9.8总共代码超过700w行，非常庞大.</span><br><span class="line"></span><br><span class="line">内核地址：https:/www.kernel.org/</span><br><span class="line"></span><br><span class="line">很多人害怕读Linux内核，Linux内核这样大而复杂的系统代码，阅读起来确实有很多因难，但是也不象想象的那么高不可攀。老韩建议可以从linux0.01入手。</span><br></pre></td></tr></table></figure>

<p><strong>linux0.01内核源码目录&amp;阅读</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内核源码技巧</span></span><br><span class="line">1.linux0.01的阅读需要懂c语言</span><br><span class="line">2.阅读源码钱，应知道Linux内核源码的整体分布情况。现代的操作系统一般由进程管理、内存管理、文件系统、驱动程序和网络等组成。Linux内核源码的各个目录大致与此相对应。</span><br><span class="line">3.在阅读方法或顺序上，有纵向与横向之分。所谓纵向就顺着程序的执行顺序逐步进行；所谓横向，就是按模块进行。它们经常结合在一起进行。</span><br><span class="line">4.对于Linux启动的代码可顺着Linux的启动顺序一步步来阅读；对于像内存管理部分，可以单独拿出来进行阅读分析。实际上这是一个反复的过程，不可能读一遍就理解。</span><br><span class="line"></span><br><span class="line"><span class="comment"># Linux内核源码阅读&amp;目录介绍&amp;main.c说明</span></span><br><span class="line">boot       <span class="comment"># 和系统引导相关的代码</span></span><br><span class="line">fs         <span class="comment"># 存放Linux支持的文件系统代码</span></span><br><span class="line">include    <span class="comment"># 存放Linux核心需要的头文件，比如asm，linux，sys</span></span><br><span class="line">kernel     <span class="comment"># 和系统内核相关的源码</span></span><br><span class="line">lib        <span class="comment"># 存放库代码</span></span><br><span class="line">mm         <span class="comment"># 和内存相关的代码</span></span><br><span class="line">tools      <span class="comment"># 工具</span></span><br><span class="line">Makefile</span><br></pre></td></tr></table></figure>

<p><strong>linux内核最新版和内核升级</strong></p>
<p>下载&amp;解压最新版</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.8.16.tar.gz</span><br><span class="line">tar -zxvf linux-5.8.16.tar.gz</span><br></pre></td></tr></table></figure>

<p>linux内核升级应用实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">将centos系统从7.6内核升级到7.8版本内核（兼容性问题）</span><br><span class="line"><span class="comment"># 查看当前内核版本</span></span><br><span class="line"><span class="built_in">uname</span> -a</span><br><span class="line"><span class="comment"># 检测内核版本,显示可以升级的内核</span></span><br><span class="line">yum info kernel -q</span><br><span class="line"><span class="comment"># 升级内核</span></span><br><span class="line">yum update kernel</span><br><span class="line"><span class="comment"># 查看已经安装的内核</span></span><br><span class="line">yum list kernel -q</span><br></pre></td></tr></table></figure>

<h3 id="linux备份与恢复"><a href="#linux备份与恢复" class="headerlink" title="linux备份与恢复"></a>linux备份与恢复</h3><p>基本介绍<br>    实体机无法做快照，如果系统出现异常或者数据损坏，后果严重，要重做系统，还会造成数据丢失。所以我们可以使用备份和恢复技术<br>linux的备份和恢复很简单，有两种方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.把需要的文件(@或者分区)用TAR打包就行，下次需要恢复的时候，再解压开覆盖即可</span><br><span class="line">2.使用dump和restorei命令</span><br></pre></td></tr></table></figure>

<p>安装dump和restore</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install dump</span><br><span class="line">yum -y install restore</span><br></pre></td></tr></table></figure>

<p>使用dump完成备份</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">●基本介绍</span><br><span class="line">dump支持分卷和增量备份（所谓增量备份是指备份上次备份后修改/增加过的文件，也称差异备份）。</span><br><span class="line">●dump语法说明</span><br><span class="line">dump [-cu] [-123456789] [-f &lt;备份后文件名&gt;] [-T &lt;日期&gt;] [目录或文件系统]</span><br><span class="line">dump []-wW</span><br><span class="line">-c：创建新的归档文件，并将由一个或多个文件参数所指定的内容写入归档文件的开头。</span><br><span class="line">-0123456789：备份的层级。0为最完整备份，会备份所有文件。若指定0以上的层级，则备份至上一次备份以来修改或新增的文件，到9后，可以再次轮替.</span><br><span class="line">-f &lt;备份后文件名&gt;：指定备份后文件名</span><br><span class="line">-j :调用bzlib库压缩备份文件，也就是将备份后的文件压缩成bz2格式，让文件更小</span><br><span class="line">-T &lt;日期&gt;：指定开始备份的时间与日期</span><br><span class="line">-u ：备份完毕后，在/etc/dumpdares中记录备份的文件系统，层级，日期与时间等。</span><br><span class="line">-t ：指定文件名，若该文件已存在备份文件中，则列出名称</span><br><span class="line">-W :显示需要备份的文件及其最后一次备份的层级，时间，日期。</span><br><span class="line">-w ：与-W类似，但仅显示需要备份的文件。</span><br></pre></td></tr></table></figure>

<p>dump应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将/boot 目录所有内容备份到/opt/boot.bak.bz2文件中，备份层级为&quot;0&quot;</span></span><br><span class="line">dump -0uj -f /opt/boot.bak.bz2 /boot</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在/boot目录下拷贝一个文件，备份层级为&quot;1&quot;（只备份上次使用层次&quot;0&quot; 备份后发生过改变的数据），注意比较看这次生成的备份文件boot1.bak 有多大</span></span><br><span class="line">dump -1uj -f 分区/opt/boot.bak1.bz2 /boot</span><br><span class="line"></span><br><span class="line">提醒：通过dump命令在配合crontab可以实现无人值守备份</span><br><span class="line"></span><br><span class="line"><span class="comment"># 前面我们在备份分区是，是可以支持增量备份的，如果备份文件或者目录，不再支持增量备份，即只能使用0级别备份</span></span><br><span class="line"><span class="comment">#案例，使用dump备份/etc 整个目录</span></span><br><span class="line">dump -oj -f /opt/etc.bak.bz2 /etc/</span><br><span class="line"></span><br><span class="line">提醒：如果是重要的备份文件，比如数据区，建议将文件上传到其他服务器保存，不要将鸡蛋放在同一个篮子。</span><br></pre></td></tr></table></figure>

<p>使用restore完成恢复</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">●基本介绍</span><br><span class="line">restore命令用来恢复已备份的文件，可以从dump生成的备份文件中恢复原文件</span><br><span class="line">●restore基本语法</span><br><span class="line">restore [模式选项] [选项]</span><br><span class="line">说明下面四个模式，不能混用，在一次命令中，只能指定一种。</span><br><span class="line">-C:使用对比模式，将备份的文件与已存在的文件相互对比。</span><br><span class="line">-i:使用交互模式，在进行还原操作时，restors指令将依序询问用户</span><br><span class="line">-r:进行还原模式</span><br><span class="line">-t:查看模式，看备份文件有哪些文件</span><br><span class="line">选项</span><br><span class="line">-f&lt;备份设备&gt;：从指定的文件中读取备份数据，进行还原操作</span><br></pre></td></tr></table></figure>

<p>应用案例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># restore命令比较模式，比较备份文件和原文件的区别</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="built_in">mv</span> /boot/hello.java /boot/hello100.java</span><br><span class="line">restore -C -f boot.bak1.bz2</span><br><span class="line"></span><br><span class="line"><span class="built_in">mv</span> /boot/hello100.java /boot/hello.java</span><br><span class="line">restore -C -f boot.bak1.bz2</span><br><span class="line"></span><br><span class="line"><span class="comment"># restore命令查看模式，看备份文件有哪些数据/文件</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">restore -t -f boot.bak0.bz2</span><br><span class="line"></span><br><span class="line"><span class="comment"># restore命令还原模式，注意细节：如果你有增量备份，需要把增量备份文件也进行恢复，有几个增量备份文件，就要恢复几个，按顺序来恢复即可。</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="built_in">mkdir</span> /opt/boottmp</span><br><span class="line"><span class="built_in">cd</span> /opt/boottmp</span><br><span class="line">restore -r -f /opt/boot.bak0.bz2 //恢复到第1次完全备份状态</span><br><span class="line">restore -r -f /opt/boot.bak1.bz2 //恢复到第2次增量备份状态</span><br></pre></td></tr></table></figure>

<h3 id="linux可视化管理webmin和bt运维工具"><a href="#linux可视化管理webmin和bt运维工具" class="headerlink" title="linux可视化管理webmin和bt运维工具"></a>linux可视化管理webmin和bt运维工具</h3><p><strong>webmin</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本介绍</span></span><br><span class="line">Webmin是功能强大的基于Web的Unix/linux系统管理工具。管理员通过浏览器访问webmin的各种管理</span><br><span class="line">功能并完成相应的管理操作。除了各版本的linux以外还可用于：AIX、HPUX、Solaris、Unixware、Irix和FreeBSD等系统</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装webmin&amp;配置</span></span><br><span class="line">1.下载地址：http:/download.webmin.com/download/yum/,用下载工具下载即可</span><br><span class="line">也可以使用wget https://download.webmin.com/download/yum/webmin-1.700-1.noarch.rpm</span><br><span class="line">2.安装：rpm -ivh webmin-1.700-1.noarch.rpm</span><br><span class="line">3.重置密码 /usr/libexec/webmin/changepass.pl /etc/webmin root <span class="built_in">test</span></span><br><span class="line">root是webmin的用户名，不是OS的，这里就是把webmin的root用户密码改成了 <span class="built_in">test</span></span><br><span class="line">4.修改webmin服务的端口号（默认是10000出于安全目的）</span><br><span class="line">vim /etc/webmin/miniserv.conf <span class="comment">#修改端口 将port=10000修改为其他端口号，如port=6666</span></span><br><span class="line">5.重启webmin</span><br><span class="line">/etc/webmin/restart <span class="comment"># 重启</span></span><br><span class="line">/etc/webmin/start   <span class="comment"># 启动</span></span><br><span class="line">/etc/webmin/stop    <span class="comment"># 停止</span></span><br><span class="line">6.防火墙放开6666端口</span><br><span class="line">firewall-cmd --zone=public --add-port=6666/tcp --permanent# 配置防火墙开发端口6666</span><br><span class="line">firewall-cmd --reload                                     <span class="comment"># 更新防火墙配置</span></span><br><span class="line">firewall-cmd --zone=public --list-ports                   <span class="comment"># 查看已经开发的端口号</span></span><br><span class="line">7.登录webmin</span><br><span class="line">http://192.168.31.101:6666</span><br><span class="line"><span class="comment">#用root账户和重置的新密码test 登录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#简单使用演示</span></span><br><span class="line"><span class="comment">#比如修改 语言设置，IP访问控制，查看进程，修改密码，任务调度，mysql等。</span></span><br></pre></td></tr></table></figure>

<p><strong>bt(宝塔)</strong><br>●基本介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bt宝塔Liux面板是提升运维数率的服务器管理软件，支持一键LAMP/LNMP/集群/监控/网站/FTP/数据库/JAVA等多项服务器管理功能。</span><br></pre></td></tr></table></figure>

<p>●安装和使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.安装:yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span><br><span class="line">2.安装成功后控制台会显示登录地址，账户密码，复制浏览器打开登录，</span><br><span class="line">【云服务器】请在安全组放行 26076 端口</span><br><span class="line">外网面板地址: https://106.80.15.105:26076/6e5b1207</span><br><span class="line">内网面板地址: https://192.168.31.101:26076/6e5b1207</span><br><span class="line">username: zdeywopk</span><br><span class="line">password: 4c6f664f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用介绍</span></span><br><span class="line">比如可以登绿终端，配置，快捷安装运行环境和系统工具，添加计划任务脚本</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入如下命令，查看用户名和密码</span></span><br><span class="line">bt default</span><br></pre></td></tr></table></figure>

<h3 id="linux面试题"><a href="#linux面试题" class="headerlink" title="linux面试题"></a>linux面试题</h3><p>●分析日志t.Iog(访问量)，将各个地址截取，并统计出现次数，并按从大到小排序（腾讯）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.200.10/index1.html</span><br><span class="line">http://192.168.200.10/index2.html</span><br><span class="line">http://192.168.200.20/index1.html</span><br><span class="line">http://192.168.200.30/index1.html</span><br><span class="line">http://192.168.200.40/index1.html</span><br><span class="line">http://192.168.200.30/order.html</span><br><span class="line">http://192.168.200.10/order.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 学不完的</span></span><br><span class="line"><span class="built_in">cat</span> t.txt | <span class="built_in">cut</span> -d <span class="string">&#x27;/&#x27;</span> -f 3 | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr</span><br></pre></td></tr></table></figure>

<p>●统计连接到服务器的各个iP情况，并按连接数从大到小排序（腾讯）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接开摆</span></span><br><span class="line">netstat -an | grep ESTABLISHED | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 1 | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr</span><br></pre></td></tr></table></figure>

<p>●问题：如忘记了mysql5.7数据库的ROOT用户的密码，如何找回？（滴滴）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接来</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"><span class="comment"># 添加如下内容在【mysqld】这栏里面</span></span><br><span class="line">skip-grant-tables</span><br><span class="line"><span class="comment"># 重启mysqld服务</span></span><br><span class="line">systemctl restart mysqld.service</span><br><span class="line"><span class="comment"># 空密码登录mysql</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># 查看数据库</span></span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">desc user;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改密码</span></span><br><span class="line">update user <span class="built_in">set</span> authentication_string=password(<span class="string">&quot;123456&quot;</span>) <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开/etc/my.cnf</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"><span class="comment"># 注释掉skip-grant-tables</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启mysql服务</span></span><br><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure>

<p>●写出指令：统计ip访问情况，要求分析nginx访问日志(access.Iog),找出访问页面数量在前十位的ip(美团)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">access.log内容如下</span><br><span class="line">192.168.130.21 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.23 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.25 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br><span class="line">192.168.130.25 aaa.html</span><br><span class="line">192.168.130.20 aaa.html</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接开整</span></span><br><span class="line"><span class="built_in">cat</span> access.log | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr | <span class="built_in">head</span> -10</span><br></pre></td></tr></table></figure>

<p>●使用tcpdump监听本机，将来自ip192.168.200.1,tcp端口为22的数据，保存输出到tcpdump.log,用做将来数据分析（美团）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接来</span></span><br><span class="line">tcpdump -i ens33 host 192.168.200.1 and port 22 &gt;&gt; /opt/tcpdump.log</span><br></pre></td></tr></table></figure>

<p>●常用的Nginx模块，用来做什么（头条）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rewrite模块，实现重写功能</span><br><span class="line">access摸块：来源控制</span><br><span class="line">ssl模块：安全加密</span><br><span class="line">ngx_http_gzip_module:网络传输压缩模块</span><br><span class="line">ngx_http_proxy_module 模块实现代理</span><br><span class="line">ngx_http_upstream_module 模块实现定义后端服务器列表</span><br><span class="line">ngx_cache_purge 实现缓存清除功能</span><br></pre></td></tr></table></figure>

<p>●如果你是系统管理员，在进行Liux系统权限划分时，应考虑哪些因素？（腾讯）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.首先阐述Linux权限的主要对象</span><br><span class="line">文件权限</span><br><span class="line">目录权限</span><br><span class="line"><span class="built_in">chmod</span> 权限管理</span><br><span class="line">2.根据自己实际经验谈考虑因素</span><br><span class="line">√注意权限分离，比如：工作中，Linux系统权限和数据库权限不要在同一个部门</span><br><span class="line">√权限最小原则（即在满足使用的情况下最少优先）</span><br><span class="line">√减少使用root用户，尽量用普通用户+<span class="built_in">sudo</span>提权进行日常操作。</span><br><span class="line">√重要的系统文件，比如/etc/passwd,/etc/shadow etc/fstab,/etc/sudoers等，日常建议使用chattr锁定，需要操作时再打开。【演示比如：锁定/ect/passwd让任可用户都不能随意useradd,除非解除锁定】</span><br><span class="line">chattr +i /etc/passwd</span><br><span class="line"></span><br><span class="line">√使用SUID,SGID,Sticky设置特殊权限。</span><br><span class="line">√可以利用工具，比如chkrootkit/rootkit hunter检测rootkit脚本（rootkit是入侵者使用工具，在不察觉的建立了入侵系统途径)[演示使用wget ftp:/tp.pangeia.com.br/pub/seg/pac/chkrootkit..tar.gz]</span><br><span class="line">√利用工具Tripwire检测文件系统完整性</span><br></pre></td></tr></table></figure>

<p>●权限操作思考题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.用户tom对目录/home/test有执行和读写权限，/home/test/hello.java是只读文件，问tom对hello.java文件能读吗？能修改吗？能删除吗？</span><br><span class="line">能 不能 能</span><br><span class="line">2.用户tom对目录/home/test只有读写权限，/home/test/hello..java是只读文件，问tom对hello.java文件能读吗？能修改吗？能删除吗？</span><br><span class="line">不能 不能 不能</span><br><span class="line">3.用户tom对目录/home/test只有执行权限，home/test/hello.java是只读文件，问tom对hello.java文件能读吗？能修改吗？能删除吗？</span><br><span class="line">能 不能 不能</span><br><span class="line">4.用户tom对目录/home/test只有执行和写权限，/home/test/hello.java是只读文件，问tom对hello.java文件能读吗？能修改吗？能删除吗？</span><br><span class="line">能 不能 能</span><br></pre></td></tr></table></figure>

<p>●说明Centos7启动程，并说明和Centos6相同和不同的地方（腾讯）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">          </span><br><span class="line">        </span><br><span class="line">第一阶段：硬件引导启动</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二阶段：GRUB2启动引导阶段</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第三阶段：内核引导阶段</span><br><span class="line"></span><br><span class="line">第四阶段：systemd初始化阶段</span><br></pre></td></tr></table></figure>

<p>●问题：列举Liux高级命令，至少6个（百度）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网络状态监控</span></span><br><span class="line">netstat</span><br><span class="line"><span class="comment"># 系统状态监控</span></span><br><span class="line">top</span><br><span class="line"><span class="comment"># 查看硬盘分区</span></span><br><span class="line">lsblk</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">find</span><br><span class="line"><span class="comment"># 查看运行进程</span></span><br><span class="line">ps -aux</span><br><span class="line"><span class="comment"># 查看服务启动状态</span></span><br><span class="line">chkconfig</span><br><span class="line"><span class="comment"># 管理系统服务</span></span><br><span class="line">systemctl</span><br></pre></td></tr></table></figure>

<p>●问题：Linux查看内存、io读写、磁盘存储、端口占用、进程查看命令是什么？（瓜子）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看内存</span></span><br><span class="line">top</span><br><span class="line"><span class="comment"># io读写</span></span><br><span class="line">iotop</span><br><span class="line"><span class="comment"># 磁盘存储</span></span><br><span class="line"><span class="built_in">df</span> -lh</span><br><span class="line"><span class="comment"># 端口占用</span></span><br><span class="line">netstat -tunlp</span><br><span class="line"><span class="comment">#进程查看</span></span><br><span class="line">ps -aux</span><br></pre></td></tr></table></figure>

<p>●使用Linux命令计算t2.txt第二列的和并输出（美团）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">张三 40</span><br><span class="line">李四 50</span><br><span class="line">王五 60</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开整</span></span><br><span class="line"><span class="built_in">cat</span> t2.txt | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;sum+=$2&#125; END &#123;pritn sum&#125;&#x27;</span> </span><br></pre></td></tr></table></figure>

<p>●Shell脚本里如何检查一个文件是否存在？并给出提示（佰度）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建脚本文件</span></span><br><span class="line">vim /目录/myshell.sh</span><br><span class="line"><span class="comment"># 输入以下内容</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ -f 文件名 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;文件不存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#执行脚本</span></span><br><span class="line">sh /目录/myshell.sh</span><br></pre></td></tr></table></figure>

<p>●用shell写一个脚本，对文本t3.txt中无序的一列数字排序，并将总和输出（百度）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在t3.txt目录下创建脚本</span></span><br><span class="line">vim sumShell.sh</span><br><span class="line"><span class="comment"># 输入以下内容</span></span><br><span class="line"><span class="comment">#!bin/bash</span></span><br><span class="line"><span class="built_in">sort</span> -nr t3.txt | awk <span class="string">&#x27;&#123;sum+=$0; print $0&#125; END &#123;print sum&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 执行脚本</span></span><br><span class="line">sh sumShell.sh</span><br></pre></td></tr></table></figure>

<p>●请用指令写出查找当前文件夹(home)下所有的文本文件内容中包含有字符”cat”的文件名称（金山）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&quot;cat&quot;</span> /home</span><br></pre></td></tr></table></figure>

<p>●请写出统计&#x2F;home目录下所有文件个数和所有文件总行数的指令（在金山面试题扩展）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 所有文件个数</span></span><br><span class="line">find /home -name <span class="string">&quot;*.*&quot;</span> | <span class="built_in">wc</span> -l</span><br><span class="line"><span class="comment"># 所有文件总行数</span></span><br><span class="line">find /home -name <span class="string">&quot;*.*&quot;</span> | xargs <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<p>●列出你了解的web服务器负载架构（滴滴）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br><span class="line">haproxy</span><br><span class="line">keeplived</span><br><span class="line">LVS</span><br></pre></td></tr></table></figure>

<p>●每天晚上10点30分，打包站点目录&#x2F;var&#x2F;spool&#x2F;mail备份到&#x2F;home目录下（每次备份按时间生成不同的备份包)（滴滴）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先写脚本</span></span><br><span class="line">vim mail.sh</span><br><span class="line"><span class="comment"># 输入一下内容</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> /var/spool/ &amp;&amp; /bin/tar zcf /home/mail-`<span class="built_in">date</span> +%Y-%m-%d_%H%M%S`.tar.gz mail/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋权</span></span><br><span class="line"><span class="built_in">chmod</span> u+x mail.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间调度</span></span><br><span class="line">contab -e</span><br><span class="line"><span class="comment"># 输入以下内容</span></span><br><span class="line">30 22 * * * /bin/sh /root/mail.sh</span><br></pre></td></tr></table></figure>

<p>●如何优化Linux系统，说出你的方法（瓜子）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.对linux的架构的优化，和原则分析</span><br><span class="line">2.对linux系统本身的优化-规则</span><br><span class="line">（1）不用root，使用<span class="built_in">sudo</span>提示权限</span><br><span class="line">（2）定时的自动更新服务时间，使用nptdate npt1.aliyun.com,让croud定时更新</span><br><span class="line">（3）配置yum源，指向国内镜像（清华，163）</span><br><span class="line">（4）配置合理的防火墙策略，打开必要的端口，关闭不必要的端口。</span><br><span class="line">（5）打开最大文件数（调整文件的描述的数量）vim /etc/profile ulimit-SHn 65535</span><br><span class="line">（6）配置合理的监控策略</span><br><span class="line">（7）配置合理的系统重要文件的备份策略</span><br><span class="line">（8）对安装的软件进行优化，比如Nginx，Apache</span><br><span class="line">（9）对内核参数进行优化 /etc/sysctl.conf</span><br><span class="line">（10）锁定一些重要的系统文件 chattr /etc/passwd /ect/shadow/etc/inittab</span><br><span class="line">（11）禁用不重要的服务ntsysv</span><br><span class="line">网络</span><br><span class="line">磁盘io</span><br><span class="line">文件连接</span><br><span class="line">安全性</span><br><span class="line">防火墙</span><br><span class="line">内存</span><br></pre></td></tr></table></figure>

<h1 id="卖油翁和老黄牛"><a href="#卖油翁和老黄牛" class="headerlink" title="卖油翁和老黄牛"></a>卖油翁和老黄牛</h1><p>我亦无他，唯手熟尔</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">joy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/09/17/Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/">http://example.com/2024/09/17/Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/09/26/%E5%B0%9A%E7%A1%85%E8%B0%B7%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%8A%80%E6%9C%AF%E4%B9%8BLinux%E5%BA%94%E7%94%A8%E5%B1%82%E5%BC%80%E5%8F%91/" title="尚硅谷嵌入式技术之Linux应用层开发"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">尚硅谷嵌入式技术之Linux应用层开发</div></div></a></div><div class="next-post pull-right"><a href="/2024/09/01/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%BD%91%E7%AB%99/" title="嵌入式网站"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">嵌入式网站</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">joy</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E6%97%B6%E4%B8%80%E5%AE%9A%E8%A6%81%E6%B8%85%E6%A5%9A%E8%87%AA%E5%B7%B1%E5%9C%A8%E5%B9%B2%E4%BB%80%E4%B9%88%E4%BA%8B%E3%80%82"><span class="toc-number">1.</span> <span class="toc-text">在执行指令时一定要清楚自己在干什么事。</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number"></span> <span class="toc-text">Linux中常用指令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%AF%87"><span class="toc-number"></span> <span class="toc-text">基础篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E5%85%A5%E9%97%A8"><span class="toc-number">0.1.</span> <span class="toc-text">Linux入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vm%E5%92%8CLinux%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">0.2.</span> <span class="toc-text">vm和Linux的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">0.3.</span> <span class="toc-text">Linux目录结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E6%93%8D%E4%BD%9C%E7%AF%87"><span class="toc-number"></span> <span class="toc-text">实际操作篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">0.1.</span> <span class="toc-text">远程登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vi%E5%92%8Cvim%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">0.2.</span> <span class="toc-text">vi和vim编辑器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA%E9%87%8D%E5%90%AF%E5%92%8C%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%B3%A8%E9%94%80"><span class="toc-number">0.3.</span> <span class="toc-text">开机重启和用户登录注销</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">0.4.</span> <span class="toc-text">实用指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">0.5.</span> <span class="toc-text">定时任务调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E3%80%81%E6%8C%82%E8%BD%BD"><span class="toc-number">0.6.</span> <span class="toc-text">磁盘分区、挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">0.7.</span> <span class="toc-text">网络配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">0.8.</span> <span class="toc-text">进程管理（重点）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RPM%E5%92%8CYUM"><span class="toc-number">0.9.</span> <span class="toc-text">RPM和YUM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E4%B9%8B%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9A%E5%88%B6%E7%AF%87%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9A%E5%88%B6%E7%AF%87-Shell%E7%BC%96%E7%A8%8B"><span class="toc-number">0.10.</span> <span class="toc-text">Linux之大数据定制篇大数据定制篇-Shell编程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2021%E9%AB%98%E7%BA%A7%E7%AF%87"><span class="toc-number"></span> <span class="toc-text">2021高级篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="toc-number">0.1.</span> <span class="toc-text">日志管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E8%87%AA%E5%B7%B1%E7%9A%84Linux"><span class="toc-number">0.2.</span> <span class="toc-text">定制自己的Linux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81-%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7"><span class="toc-number">0.3.</span> <span class="toc-text">linux内核源码&amp;内核升级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">0.4.</span> <span class="toc-text">linux备份与恢复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86webmin%E5%92%8Cbt%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7"><span class="toc-number">0.5.</span> <span class="toc-text">linux可视化管理webmin和bt运维工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">0.6.</span> <span class="toc-text">linux面试题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%96%E6%B2%B9%E7%BF%81%E5%92%8C%E8%80%81%E9%BB%84%E7%89%9B"><span class="toc-number"></span> <span class="toc-text">卖油翁和老黄牛</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/26/%E5%B0%9A%E7%A1%85%E8%B0%B7%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%8A%80%E6%9C%AF%E4%B9%8BLinux%E5%BA%94%E7%94%A8%E5%B1%82%E5%BC%80%E5%8F%91/" title="尚硅谷嵌入式技术之Linux应用层开发">尚硅谷嵌入式技术之Linux应用层开发</a><time datetime="2024-09-26T01:48:58.379Z" title="Created 2024-09-26 09:48:58">2024-09-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/17/Linux%E4%B8%AD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" title="Linux中常用指令">Linux中常用指令</a><time datetime="2024-09-17T09:12:01.534Z" title="Created 2024-09-17 17:12:01">2024-09-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/01/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%BD%91%E7%AB%99/" title="嵌入式网站">嵌入式网站</a><time datetime="2024-09-01T06:30:54.915Z" title="Created 2024-09-01 14:30:54">2024-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/01/My-New-Post/" title="My New Post">My New Post</a><time datetime="2024-09-01T03:08:28.000Z" title="Created 2024-09-01 11:08:28">2024-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/01/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E6%97%A5%E5%B8%B8/" title="嵌入式工程师的日常">嵌入式工程师的日常</a><time datetime="2024-09-01T03:08:28.000Z" title="Created 2024-09-01 11:08:28">2024-09-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By joy</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>